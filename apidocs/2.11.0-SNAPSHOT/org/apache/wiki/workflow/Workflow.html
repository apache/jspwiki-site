<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.9) on Fri Jan 15 07:26:44 UTC 2021 -->
<title>Workflow (Apache JSPWiki 2.11.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-01-15">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Workflow (Apache JSPWiki 2.11.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Workflow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.wiki.workflow</a></div>
<h2 title="Class Workflow" class="title">Class Workflow</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.wiki.workflow.Workflow</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.io.Serializable</code></dd>
</dl>
<hr>
<object type="image/svg+xml" data="Workflow.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public class <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.161">Workflow</a>
extends java.lang.Object
implements java.io.Serializable</pre>
<div class="block"><p>
 Sequence of <a href="Step.html" title="interface in org.apache.wiki.workflow"><code>Step</code></a> objects linked together. Workflows are always initialized with a message key that denotes the name of the
 Workflow, and a Principal that represents its owner.
 </p>
 <h2>Workflow lifecycle</h2>
 A Workflow's state (obtained by <a href="#getCurrentState()"><code>getCurrentState()</code></a>) will be one of the following:
 </p>
 <ul>
 <li><strong><a href="#CREATED"><code>CREATED</code></a></strong>: after the Workflow has been instantiated, but before it has been started using the <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a>
 method.</li>
 <li><strong><a href="#RUNNING"><code>RUNNING</code></a></strong>: after the Workflow has been started using the <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a> method, but before it has
 finished processing all Steps. Note that a Workflow can only be started once; attempting to start it again results in an
 IllegalStateException. Callers can place the Workflow into the WAITING state by calling <a href="#waitstate()"><code>waitstate()</code></a>.</li>
 <li><strong><a href="#WAITING"><code>WAITING</code></a></strong>: when the Workflow has temporarily paused, for example because of a pending Decision. Once the
 responsible actor decides what to do, the caller can change the Workflow back to the RUNNING state by calling the <a href="#restart(org.apache.wiki.api.core.Context)"><code>restart(Context)</code></a>
 method (this is done automatically by the Decision class, for instance, when the <a href="Decision.html#decide(org.apache.wiki.workflow.Outcome,org.apache.wiki.api.core.Context)"><code>Decision.decide(Outcome, Context)</code></a> method is invoked)</li>
 <li><strong><a href="#COMPLETED"><code>COMPLETED</code></a></strong>: after the Workflow has finished processing all Steps, without errors.</li>
 <li><strong><a href="#ABORTED"><code>ABORTED</code></a></strong>: if a Step has elected to abort the Workflow.</li>
 </ul>
 <h2>Steps and processing algorithm</h2>
 <p>
 Workflow Step objects can be of type <a href="Decision.html" title="class in org.apache.wiki.workflow"><code>Decision</code></a>, <a href="Task.html" title="class in org.apache.wiki.workflow"><code>Task</code></a> or other Step subclasses. Decisions require user input, while Tasks
 do not. See the <a href="Step.html" title="interface in org.apache.wiki.workflow"><code>Step</code></a> class for more details.
 </p>
 <p>
 After instantiating a new Workflow (but before telling it to <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a>), calling classes should specify the first Step by
 executing the <a href="#setFirstStep(org.apache.wiki.workflow.Step)"><code>setFirstStep(Step)</code></a> method. Additional Steps can be chained by invoking the first step's
 <a href="Step.html#addSuccessor(org.apache.wiki.workflow.Outcome,org.apache.wiki.workflow.Step)"><code>Step.addSuccessor(Outcome, Step)</code></a> method.
 </p>
 <p>
 When a Workflow's <code>start</code> method is invoked, the Workflow retrieves the first Step and processes it. This Step, and subsequent
 ones, are processed as follows:
 </p>
 <ul>
 <li>The Step's <a href="Step.html#start()"><code>Step.start()</code></a> method executes, which sets the start time.</li>
 <li>The Step's <a href="Step.html#execute(org.apache.wiki.api.core.Context)"><code>Step.execute(Context)</code></a> method is called to begin processing, which will return an Outcome to indicate completion,
 continuation or errors:</li>
 <ul>
 <li><a href="Outcome.html#STEP_COMPLETE"><code>Outcome.STEP_COMPLETE</code></a> indicates that the execution method ran without errors, and that the Step should be considered
 "completed."</li>
 <li><a href="Outcome.html#STEP_CONTINUE"><code>Outcome.STEP_CONTINUE</code></a> indicates that the execution method ran without errors, but that the Step is not "complete" and should
 be put into the WAITING state.</li>
 <li><a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a> indicates that the execution method encountered errors, and should abort the Step <em>and</em> the
 Workflow as a whole. When this happens, the Workflow will set the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a> and invoke the
 Workflow's <a href="#abort(org.apache.wiki.api.core.Context)"><code>abort(Context)</code></a> method. The Step's processing errors, if any, can be retrieved by <a href="Step.html#getErrors()"><code>Step.getErrors()</code></a>.</li>
 </ul>
 <li>The Outcome of the <code>execute</code> method also affects what happens next. Depending on the result (and assuming the Step did
 not abort), the Workflow will either move on to the next Step or put the Workflow into the <a href="#WAITING"><code>WAITING</code></a> state:</li>
 <ul>
 <li>If the Outcome denoted "completion" (<em>i.e.</em>, its <a href="Step.html#isCompleted()"><code>Step.isCompleted()</code></a> method returns <code>true</code>) then the Step
 is considered complete; the Workflow looks up the next Step by calling the current Step's <a href="Step.html#getSuccessor(org.apache.wiki.workflow.Outcome)"><code>Step.getSuccessor(Outcome)</code></a> method. If
 <code>successor()</code> returns a non-<code>null</code> Step, the return value is marked as the current Step and added to the Workflow's
 Step history. If <code>successor()</code> returns <code>null</code>, then the Workflow has no more Steps and it enters the
 <a href="#COMPLETED"><code>COMPLETED</code></a> state.</li>
 <li>If the Outcome did not denote "completion" (<em>i.e.</em>, its <a href="Step.html#isCompleted()"><code>Step.isCompleted()</code></a> method returns <code>false</code>), then
 the Step still has further work to do. The Workflow enters the <a href="#WAITING"><code>WAITING</code></a> state and stops further processing until a caller
 restarts it.</li>
 </ul>
 </ul>
 </p>
 <p>
 The currently executing Step can be obtained by <a href="#getCurrentStep()"><code>getCurrentStep()</code></a>. The actor for the current Step is returned by
 <a href="#getCurrentActor()"><code>getCurrentActor()</code></a>.
 </p>
 <p>
 To provide flexibility for specific implementations, the Workflow class provides two additional features that enable Workflow
 participants (<em>i.e.</em>, Workflow subclasses and Step/Task/Decision subclasses) to share context and state information. These two
 features are <em>named attributes</em> and <em>message arguments</em>:
 </p>
 <ul>
 <li><strong>Named attributes</strong> are simple key-value pairs that Workflow participants can get or set. Keys are Strings; values
 can be any Object. Named attributes are set with <a href="#setAttribute(java.lang.String,java.io.Serializable)"><code>setAttribute(String, Serializable)</code></a> and retrieved with <a href="#getAttribute(java.lang.String)"><code>getAttribute(String)</code></a>.</li>
 <li><strong>Message arguments</strong> are used in combination with JSPWiki's <a href="../i18n/InternationalizationManager.html" title="interface in org.apache.wiki.i18n"><code>InternationalizationManager</code></a> to
 create language-independent user interface messages. The message argument array is retrieved via <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>; the
 first two array elements will always be these: a String representing work flow owner's name, and a String representing the current
 actor's name. Workflow participants can add to this array by invoking <a href="#addMessageArgument(java.io.Serializable)"><code>addMessageArgument(Serializable)</code></a>.</li>
 </ul>
 <h2>Example</h2>
 <p>
 Workflow Steps can be very powerful when linked together. JSPWiki provides two abstract subclasses classes that you can use to build
 your own Workflows: Tasks and Decisions. As noted, Tasks are Steps that execute without user intervention, while Decisions require
 actors (<em>aka</em> Principals) to take action. Decisions and Tasks can be mixed freely to produce some highly elaborate branching
 structures.
 </p>
 <p>
 Here is a simple case. For example, suppose you would like to create a Workflow that (a) executes a initialization Task, (b) pauses to
 obtain an approval Decision from a user in the Admin group, and if approved, (c) executes a "finish" Task. Here's sample code that
 illustrates how to do it:
 </p>

 <pre>
    // Create workflow; owner is current user
 1  Workflow workflow = new Workflow( &quot; workflow.myworkflow &quot;, context.getCurrentUser() );

    // Create custom initialization task
 2  Step initTask = new InitTask( this );

    // Create finish task
 3  Step finishTask = new FinishTask( this );

    // Create an intermediate decision step
 4  Principal actor = new GroupPrincipal( &quot;Admin&quot; );
 5  Step decision = new SimpleDecision( this, &quot;decision.AdminDecision&quot;, actor );

    // Hook the steps together
 6  initTask.addSuccessor( Outcome.STEP_COMPLETE, decision );
 7  decision.addSuccessor( Outcome.DECISION_APPROVE, finishTask );

    // Set workflow's first step
 8  workflow.setFirstStep( initTask );
 </pre>

 <p>
 Some comments on the source code:
 </p>
 <ul>
 <li>Line 1 instantiates the workflow with a sample message key and designated owner Principal, in this case the current wiki user</li>
 <li>Lines 2 and 3 instantiate the custom Task subclasses, which contain the business logic</li>
 <li>Line 4 creates the relevant GroupPrincipal for the <code>Admin</code> group, who will be the actor in the Decision step</li>
 <li>Line 5 creates the Decision step, passing the Workflow, sample message key, and actor in the constructor</li>
 <li>Line 6 specifies that if the InitTask's Outcome signifies "normal completion" (STEP_COMPLETE), the SimpleDecision step should be
 invoked next</li>
 <li>Line 7 specifies that if the actor (anyone possessing the <code>Admin</code> GroupPrincipal) selects DECISION_APPROVE, the FinishTask
 step should be invoked</li>
 <li>Line 8 adds the InitTask (and all of its successor Steps, nicely wired together) to the workflow</li>
 </ul></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#org.apache.wiki.workflow.Workflow">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary" style="clear:right;">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ABORTED">ABORTED</a></span></code></th>
<td class="colLast">
<div class="block">State value: Workflow aborted before completion.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#COMPLETED">COMPLETED</a></span></code></th>
<td class="colLast">
<div class="block">State value: Workflow completed all Steps without errors.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#CREATED">CREATED</a></span></code></th>
<td class="colLast">
<div class="block">State value: Workflow instantiated, but not started.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ID_NOT_SET">ID_NOT_SET</a></span></code></th>
<td class="colLast">
<div class="block">ID value: the workflow ID has not been set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#RUNNING">RUNNING</a></span></code></th>
<td class="colLast">
<div class="block">State value: Workflow started, and is running.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#WAITING">WAITING</a></span></code></th>
<td class="colLast">
<div class="block">State value: Workflow paused, typically because a Step returned an Outcome that doesn't signify "completion."</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.security.Principal)">Workflow</a></span>&#8203;(java.lang.String&nbsp;messageKey,
        java.security.Principal&nbsp;owner)</code></th>
<td class="colLast">
<div class="block">Constructs a new Workflow object with a supplied message key, owner Principal, and undefined unique identifier <a href="#ID_NOT_SET"><code>ID_NOT_SET</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#abort(org.apache.wiki.api.core.Context)">abort</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Aborts the Workflow by setting the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a>, and the Workflow's overall state to
 <a href="#ABORTED"><code>ABORTED</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addMessageArgument(java.io.Serializable)">addMessageArgument</a></span>&#8203;(java.io.Serializable&nbsp;obj)</code></th>
<td class="colLast">
<div class="block">Appends a message argument object to the array returned by <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cleanup()">cleanup</a></span>()</code></th>
<td class="colLast">
<div class="block">Clears the attribute map and sets the current step field to <code>null</code>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#complete()">complete</a></span>()</code></th>
<td class="colLast">
<div class="block">Protected helper method that changes the Workflow's state to <a href="#COMPLETED"><code>COMPLETED</code></a> and sets the current Step to <code>null</code>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAttribute(java.lang.String)">getAttribute</a></span>&#8203;(java.lang.String&nbsp;attr)</code></th>
<td class="colLast">
<div class="block">Retrieves a named Object associated with this Workflow.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,&#8203;java.io.Serializable&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAttributes()">getAttributes</a></span>()</code></th>
<td class="colLast">
<div class="block">Retrieves workflow's attributes.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.security.Principal</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentActor()">getCurrentActor</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the actor Principal responsible for the current Step.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentState()">getCurrentState</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the workflow state: <a href="#CREATED"><code>CREATED</code></a>, <a href="#RUNNING"><code>RUNNING</code></a>, <a href="#WAITING"><code>WAITING</code></a>, <a href="#COMPLETED"><code>COMPLETED</code></a> or <a href="#ABORTED"><code>ABORTED</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentStep()">getCurrentStep</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current Step, or <code>null</code> if the workflow has not started or already completed.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.util.Date</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEndTime()">getEndTime</a></span>()</code></th>
<td class="colLast">
<div class="block">The end time for this Workflow, expressed as a system time number.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHistory()">getHistory</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns a Step history for this Workflow as a List, chronologically, from the first Step to the currently executing one.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getId()">getId</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the unique identifier for this Workflow.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.io.Serializable[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMessageArguments()">getMessageArguments</a></span>()</code></th>
<td class="colLast">
<div class="block">
 Returns an array of message arguments, used by <code>MessageFormat</code> to create localized messages.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMessageKey()">getMessageKey</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns an i18n message key for the name of this workflow; for example,
 <code>workflow.saveWikiPage</code>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.security.Principal</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOwner()">getOwner</a></span>()</code></th>
<td class="colLast">
<div class="block">The owner Principal on whose behalf this Workflow is being executed; that is, the user who created the workflow.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPreviousStep()">getPreviousStep</a></span>()</code></th>
<td class="colLast">
<div class="block">Convenience method that returns the predecessor of the current Step.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.util.Date</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getStartTime()">getStartTime</a></span>()</code></th>
<td class="colLast">
<div class="block">The start time for this Workflow, expressed as a system time number.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isAborted()">isAborted</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns <code>true</code> if the workflow had been previously aborted.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isCompleted()">isCompleted</a></span>()</code></th>
<td class="colLast">
<div class="block">Determines whether this Workflow is completed; that is, if it has no additional Steps to perform.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isStarted()">isStarted</a></span>()</code></th>
<td class="colLast">
<div class="block">Determines whether this Workflow has started; that is, its <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a> method has been executed.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>protected <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#previousStep(org.apache.wiki.workflow.Step)">previousStep</a></span>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</code></th>
<td class="colLast">
<div class="block">Protected method that returns the predecessor for a supplied Step.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#processCurrentStep(org.apache.wiki.api.core.Context)">processCurrentStep</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Protected method that processes the current Step by calling <a href="Step.html#execute(org.apache.wiki.api.core.Context)"><code>Step.execute( Context )</code></a>.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restart(org.apache.wiki.api.core.Context)">restart</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Restarts the Workflow from the <a href="#WAITING"><code>WAITING</code></a> state and puts it into the <a href="#RUNNING"><code>RUNNING</code></a> state again.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setAttribute(java.lang.String,java.io.Serializable)">setAttribute</a></span>&#8203;(java.lang.String&nbsp;attr,
            java.io.Serializable&nbsp;obj)</code></th>
<td class="colLast">
<div class="block">Temporarily associates an object with this Workflow, as a named attribute, for the duration of workflow execution.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFirstStep(org.apache.wiki.workflow.Step)">setFirstStep</a></span>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</code></th>
<td class="colLast">
<div class="block">Sets the first Step for this Workflow, which will be executed immediately
 after the <a href="#start(org.apache.wiki.api.core.Context)"><code>start( Context )</code></a> method executes.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setId(int)">setId</a></span>&#8203;(int&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Sets the unique identifier for this Workflow.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#start(org.apache.wiki.api.core.Context)">start</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Starts the Workflow and sets the state to <a href="#RUNNING"><code>RUNNING</code></a>.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waitstate()">waitstate</a></span>()</code></th>
<td class="colLast">
<div class="block">Sets the Workflow in the <a href="#WAITING"><code>WAITING</code></a> state.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a id="ID_NOT_SET">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ID_NOT_SET</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.168">ID_NOT_SET</a></pre>
<div class="block">ID value: the workflow ID has not been set.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.ID_NOT_SET">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="COMPLETED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>COMPLETED</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.171">COMPLETED</a></pre>
<div class="block">State value: Workflow completed all Steps without errors.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.COMPLETED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="ABORTED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ABORTED</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.174">ABORTED</a></pre>
<div class="block">State value: Workflow aborted before completion.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.ABORTED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="WAITING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WAITING</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.177">WAITING</a></pre>
<div class="block">State value: Workflow paused, typically because a Step returned an Outcome that doesn't signify "completion."</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.WAITING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="RUNNING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>RUNNING</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.180">RUNNING</a></pre>
<div class="block">State value: Workflow started, and is running.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.RUNNING">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a id="CREATED">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CREATED</h4>
<pre>public static final&nbsp;int <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.183">CREATED</a></pre>
<div class="block">State value: Workflow instantiated, but not started.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.CREATED">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(java.lang.String,java.security.Principal)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Workflow</h4>
<pre>public&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.216">Workflow</a>&#8203;(java.lang.String&nbsp;messageKey,
                java.security.Principal&nbsp;owner)</pre>
<div class="block">Constructs a new Workflow object with a supplied message key, owner Principal, and undefined unique identifier <a href="#ID_NOT_SET"><code>ID_NOT_SET</code></a>.
 Once instantiated the Workflow is considered to be in the <a href="#CREATED"><code>CREATED</code></a> state; a caller must explicitly invoke the
 <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a> method to begin processing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>messageKey</code> - the message key used to construct a localized workflow name, such as <code>workflow.saveWikiPage</code></dd>
<dd><code>owner</code> - the Principal who owns the Workflow. Typically, this is the user who created and submitted it</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="abort(org.apache.wiki.api.core.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.236">abort</a>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)</pre>
<div class="block">Aborts the Workflow by setting the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a>, and the Workflow's overall state to
 <a href="#ABORTED"><code>ABORTED</code></a>. It also appends the aborted Step into the workflow history, and sets the current step to <code>null</code>.
 If the Step is a Decision, it is removed from the DecisionQueue. This method can be called at any point in the lifecycle prior
 to completion, but it cannot be called twice. It finishes by calling the <a href="#cleanup()"><code>cleanup()</code></a> method to flush retained objects.
 If the Workflow had been previously aborted, this method throws an IllegalStateException.</div>
</li>
</ul>
<a id="addMessageArgument(java.io.Serializable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addMessageArgument</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.264">addMessageArgument</a>&#8203;(java.io.Serializable&nbsp;obj)</pre>
<div class="block">Appends a message argument object to the array returned by <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>. The object <em>must</em> be an type
 used by the <code>MessageFormat</code>: String, Date, or Number (BigDecimal, BigInteger, Byte, Double, Float, Integer, Long,
 Short). If the object is not of type String, Number or Date, this method throws an IllegalArgumentException.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>obj</code> - the object to add</dd>
</dl>
</li>
</ul>
<a id="getCurrentActor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentActor</h4>
<pre class="methodSignature">public final&nbsp;java.security.Principal&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.278">getCurrentActor</a>()</pre>
<div class="block">Returns the actor Principal responsible for the current Step. If there is
 no current Step, this method returns <code>null</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current actor</dd>
</dl>
</li>
</ul>
<a id="getCurrentState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentState</h4>
<pre class="methodSignature">public final&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.290">getCurrentState</a>()</pre>
<div class="block">Returns the workflow state: <a href="#CREATED"><code>CREATED</code></a>, <a href="#RUNNING"><code>RUNNING</code></a>, <a href="#WAITING"><code>WAITING</code></a>, <a href="#COMPLETED"><code>COMPLETED</code></a> or <a href="#ABORTED"><code>ABORTED</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the workflow state</dd>
</dl>
</li>
</ul>
<a id="getCurrentStep()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentStep</h4>
<pre class="methodSignature">public final&nbsp;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.300">getCurrentStep</a>()</pre>
<div class="block">Returns the current Step, or <code>null</code> if the workflow has not started or already completed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the current step</dd>
</dl>
</li>
</ul>
<a id="getAttribute(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttribute</h4>
<pre class="methodSignature">public final&nbsp;java.lang.Object&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.312">getAttribute</a>&#8203;(java.lang.String&nbsp;attr)</pre>
<div class="block">Retrieves a named Object associated with this Workflow. If the Workflow has completed or aborted, this method always returns
 <code>null</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>attr</code> - the name of the attribute</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the value</dd>
</dl>
</li>
</ul>
<a id="getAttributes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAttributes</h4>
<pre class="methodSignature">public final&nbsp;java.util.Map&lt;java.lang.String,&#8203;java.io.Serializable&gt;&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.321">getAttributes</a>()</pre>
<div class="block">Retrieves workflow's attributes.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>workflow's attributes.</dd>
</dl>
</li>
</ul>
<a id="getEndTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEndTime</h4>
<pre class="methodSignature">public final&nbsp;java.util.Date&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.331">getEndTime</a>()</pre>
<div class="block">The end time for this Workflow, expressed as a system time number. This value is equal to the end-time value returned by the final
 Step's <a href="Step.html#getEndTime()"><code>Step.getEndTime()</code></a> method, if the workflow has completed. Otherwise, this method returns <a href="Step.html#TIME_NOT_SET"><code>Step.TIME_NOT_SET</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the end time</dd>
</dl>
</li>
</ul>
<a id="getId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre class="methodSignature">public final&nbsp;int&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.346">getId</a>()</pre>
<div class="block">Returns the unique identifier for this Workflow. If not set, this method returns ID_NOT_SET (<a href="#ID_NOT_SET">0</a>).</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the unique identifier</dd>
</dl>
</li>
</ul>
<a id="getMessageArguments()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessageArguments</h4>
<pre class="methodSignature">public final&nbsp;java.io.Serializable[]&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.368">getMessageArguments</a>()</pre>
<div class="block"><p>
 Returns an array of message arguments, used by <code>MessageFormat</code> to create localized messages. The first
 two array elements will always be these:
 </p>
 <ul>
 <li>String representing the name of the workflow owner (<em>i.e.</em>,<a href="#getOwner()"><code>getOwner()</code></a>)</li>
 <li>String representing the name of the current actor (<em>i.e.</em>,<a href="#getCurrentActor()"><code>getCurrentActor()</code></a>).
 If the current step is <code>null</code> because the workflow hasn't started or has already
 finished, the value of this argument will be a dash character (<code>-</code>)</li>
 </ul>
 <p>
 Workflow and Step subclasses are free to append items to this collection with <a href="#addMessageArgument(java.io.Serializable)"><code>addMessageArgument(Serializable)</code></a>.
 </p></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the array of message arguments</dd>
</dl>
</li>
</ul>
<a id="getMessageKey()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMessageKey</h4>
<pre class="methodSignature">public final&nbsp;java.lang.String&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.383">getMessageKey</a>()</pre>
<div class="block">Returns an i18n message key for the name of this workflow; for example,
 <code>workflow.saveWikiPage</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the name</dd>
</dl>
</li>
</ul>
<a id="getOwner()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOwner</h4>
<pre class="methodSignature">public final&nbsp;java.security.Principal&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.393">getOwner</a>()</pre>
<div class="block">The owner Principal on whose behalf this Workflow is being executed; that is, the user who created the workflow.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the name of the Principal who owns this workflow</dd>
</dl>
</li>
</ul>
<a id="getStartTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStartTime</h4>
<pre class="methodSignature">public final&nbsp;java.util.Date&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.405">getStartTime</a>()</pre>
<div class="block">The start time for this Workflow, expressed as a system time number. This value is equal to the start-time value returned by the
 first Step's <a href="Step.html#getStartTime()"><code>Step.getStartTime()</code></a> method, if the workflow has started already. Otherwise, this method returns
 <a href="Step.html#TIME_NOT_SET"><code>Step.TIME_NOT_SET</code></a>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the start time</dd>
</dl>
</li>
</ul>
<a id="getHistory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHistory</h4>
<pre class="methodSignature">public final&nbsp;java.util.List&lt;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&gt;&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.416">getHistory</a>()</pre>
<div class="block">Returns a Step history for this Workflow as a List, chronologically, from the first Step to the currently executing one. The first
 step is the first item in the array. If the Workflow has not started, this method returns a zero-length array.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an array of Steps representing those that have executed, or are currently executing</dd>
</dl>
</li>
</ul>
<a id="isAborted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAborted</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.426">isAborted</a>()</pre>
<div class="block">Returns <code>true</code> if the workflow had been previously aborted.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result</dd>
</dl>
</li>
</ul>
<a id="isCompleted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCompleted</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.437">isCompleted</a>()</pre>
<div class="block">Determines whether this Workflow is completed; that is, if it has no additional Steps to perform. If the last Step in the workflow is
 finished, this method will return <code>true</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the workflow has been started but has no more steps to perform; <code>false</code> if not.</dd>
</dl>
</li>
</ul>
<a id="isStarted()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStarted</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.447">isStarted</a>()</pre>
<div class="block">Determines whether this Workflow has started; that is, its <a href="#start(org.apache.wiki.api.core.Context)"><code>start(Context)</code></a> method has been executed.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the workflow has been started; <code>false</code> if not.</dd>
</dl>
</li>
</ul>
<a id="getPreviousStep()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreviousStep</h4>
<pre class="methodSignature">public final&nbsp;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.458">getPreviousStep</a>()</pre>
<div class="block">Convenience method that returns the predecessor of the current Step. This method simply examines the Workflow history and returns the
 second-to-last Step.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the predecessor, or <code>null</code> if the first Step is currently executing</dd>
</dl>
</li>
</ul>
<a id="restart(org.apache.wiki.api.core.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restart</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.471">restart</a>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)
                   throws <a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></pre>
<div class="block">Restarts the Workflow from the <a href="#WAITING"><code>WAITING</code></a> state and puts it into the <a href="#RUNNING"><code>RUNNING</code></a> state again. If the Workflow had not
 previously been paused, this method throws an IllegalStateException. If any of the Steps in this Workflow throw a WikiException,
 the Workflow will abort and propagate the exception to callers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - current wiki context</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current task's <a href="AbstractStep.html#execute(org.apache.wiki.api.core.Context)"><code>AbstractStep.execute( Context )</code></a> method throws an exception</dd>
</dl>
</li>
</ul>
<a id="setAttribute(java.lang.String,java.io.Serializable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAttribute</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.496">setAttribute</a>&#8203;(java.lang.String&nbsp;attr,
                               java.io.Serializable&nbsp;obj)</pre>
<div class="block">Temporarily associates an object with this Workflow, as a named attribute, for the duration of workflow execution. The passed
 object can be anything required by an executing Step, although it <em>should</em> be serializable. Note that when the workflow
 completes or aborts, all attributes will be cleared.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>attr</code> - the attribute name</dd>
<dd><code>obj</code> - the value</dd>
</dl>
</li>
</ul>
<a id="setFirstStep(org.apache.wiki.workflow.Step)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFirstStep</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.508">setFirstStep</a>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</pre>
<div class="block">Sets the first Step for this Workflow, which will be executed immediately
 after the <a href="#start(org.apache.wiki.api.core.Context)"><code>start( Context )</code></a> method executes. Note than the Step is not
 marked as the "current" step or added to the Workflow history until the
 <a href="#start(org.apache.wiki.api.core.Context)"><code>start( Context )</code></a> method is called.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>step</code> - the first step for the workflow</dd>
</dl>
</li>
</ul>
<a id="setId(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setId</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.518">setId</a>&#8203;(int&nbsp;id)</pre>
<div class="block">Sets the unique identifier for this Workflow.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the unique identifier</dd>
</dl>
</li>
</ul>
<a id="start(org.apache.wiki.api.core.Context)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.531">start</a>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)
                 throws <a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></pre>
<div class="block">Starts the Workflow and sets the state to <a href="#RUNNING"><code>RUNNING</code></a>. If the Workflow has already been started (or previously aborted), this
 method returns an IllegalStateException. If any of the Steps in this Workflow throw a WikiException, the Workflow will
 abort and propagate the exception to callers.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - current wiki context.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current Step's <a href="Step.html#start()"><code>Step.start()</code></a> method throws an exception of any kind</dd>
</dl>
</li>
</ul>
<a id="waitstate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitstate</h4>
<pre class="methodSignature">public final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.560">waitstate</a>()</pre>
<div class="block">Sets the Workflow in the <a href="#WAITING"><code>WAITING</code></a> state. If the Workflow is not running or has already been paused, this method throws an
 IllegalStateException. Once paused, the Workflow can be un-paused by executing the <a href="#restart(org.apache.wiki.api.core.Context)"><code>restart(Context)</code></a> method.</div>
</li>
</ul>
<a id="cleanup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanup</h4>
<pre class="methodSignature">protected&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.571">cleanup</a>()</pre>
<div class="block">Clears the attribute map and sets the current step field to <code>null</code>.</div>
</li>
</ul>
<a id="complete()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>complete</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.580">complete</a>()</pre>
<div class="block">Protected helper method that changes the Workflow's state to <a href="#COMPLETED"><code>COMPLETED</code></a> and sets the current Step to <code>null</code>. It
 calls the <a href="#cleanup()"><code>cleanup()</code></a> method to flush retained objects. This method will no-op if it has previously been called.</div>
</li>
</ul>
<a id="previousStep(org.apache.wiki.workflow.Step)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>previousStep</h4>
<pre class="methodSignature">protected final&nbsp;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.594">previousStep</a>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</pre>
<div class="block">Protected method that returns the predecessor for a supplied Step.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>step</code> - the Step for which the predecessor is requested</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>its predecessor, or <code>null</code> if the first Step was supplied.</dd>
</dl>
</li>
</ul>
<a id="processCurrentStep(org.apache.wiki.api.core.Context)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>processCurrentStep</h4>
<pre class="methodSignature">protected final&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.605">processCurrentStep</a>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context)
                                 throws <a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></pre>
<div class="block">Protected method that processes the current Step by calling <a href="Step.html#execute(org.apache.wiki.api.core.Context)"><code>Step.execute( Context )</code></a>. If the <code>execute</code> throws an
 exception, this method will propagate the exception immediately to callers without aborting.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current Step's <a href="Step.html#start()"><code>Step.start()</code></a> method throws an exception of any kind</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Workflow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright © 2001-2021 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</body>
</html>