<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (15) on Mon Dec 14 21:24:50 CET 2020 -->
<title>SpamFilter (Apache JSPWiki 2.11.0.M8 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-12-14">
<meta name="description" content="declaration: package: org.apache.wiki.filters, class: SpamFilter">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":10,"i5":9,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SpamFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.wiki.filters</a></div>
<h1 title="Class SpamFilter" class="title">Class SpamFilter</h1>
</div>
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance"><a href="../api/filters/BasePageFilter.html" title="class in org.apache.wiki.api.filters">org.apache.wiki.api.filters.BasePageFilter</a>
<div class="inheritance">org.apache.wiki.filters.SpamFilter</div>
</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../api/filters/PageFilter.html" title="interface in org.apache.wiki.api.filters">PageFilter</a></code></dd>
</dl>
<hr>
<object type="image/svg+xml" data="SpamFilter.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public class <a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.110">SpamFilter</a>
extends <a href="../api/filters/BasePageFilter.html" title="class in org.apache.wiki.api.filters">BasePageFilter</a></pre>
<div class="block">This is Herb, the JSPWiki spamfilter that can also do choke modifications.

  Parameters:
  <ul>
    <li>wordlist - Page name where the spamword regexps are found.  Use [{SET spamwords='regexp list separated with spaces'}] on
     that page.  Default is "SpamFilterWordList".
    <li>IPlist - Page name where the IP regexps are found.  Use [{SET ips='regexp list separated with spaces'}] on
     that page.  Default is "SpamFilterIPList".
    <li>maxpagenamelength - Maximum page name length. Default is 100.
    <li>blacklist - The name of an attachment containing the list of spam patterns, one per line. Default is
        "SpamFilterWordList/blacklist.txt"</li>
    <li>errorpage - The page to which the user is redirected.  Has a special variable $msg which states the reason. Default is "RejectedMessage".
    <li>pagechangesinminute - How many page changes are allowed/minute.  Default is 5.</li>
    <li>similarchanges - How many similar page changes are allowed before the host is banned.  Default is 2.  (since 2.4.72)</li>
    <li>bantime - How long an IP address stays on the temporary ban list (default is 60 for 60 minutes).</li>
    <li>maxurls - How many URLs can be added to the page before it is considered spam (default is 5)</li>
    <li>akismet-apikey - The Akismet API key (see akismet.org)</li>
    <li>ignoreauthenticated - If set to "true", all authenticated users are ignored and never caught in SpamFilter</li>
    <li>captcha - Sets the captcha technology to use.  Current allowed values are "none" and "asirra".</li>
    <li>strategy - Sets the filtering strategy to use.  If set to "eager", will stop at the first probable
        match, and won't consider any other tests.  This is the default, as it's considerably lighter. If set to "score", will go through all of the tests
        and calculates a score for the spam, which is then compared to a filter level value.
  </ul>

  <p>Please see the default editors/plain.jsp for examples on how the SpamFilter integrates
  with the editor system.</p>
  
  <p>Changes by admin users are ignored in any case.</p></div>
<dl class="notes">
<dt>Since:</dt>
<dd>2.1.112</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_AKISMET_API_KEY">PROP_AKISMET_API_KEY</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying the Akismet API-key.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_BANTIME">PROP_BANTIME</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying how long a host is banned.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_BLACKLIST">PROP_BLACKLIST</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for the attachment containing the blacklist.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_CAPTCHA">PROP_CAPTCHA</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying which captcha technology should be used.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_ERRORPAGE">PROP_ERRORPAGE</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for the page to which you are directed if Herb rejects your edit.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_FILTERSTRATEGY">PROP_FILTERSTRATEGY</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying which filter strategy should be used.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_IGNORE_AUTHENTICATED">PROP_IGNORE_AUTHENTICATED</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying whether authenticated users should be ignored.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_IPLIST">PROP_IPLIST</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying the page which contains the list of IPs to ban.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_MAX_PAGENAME_LENGTH">PROP_MAX_PAGENAME_LENGTH</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying the maximum page name length.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_MAXURLS">PROP_MAXURLS</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying how many URLs can any given edit contain.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_PAGECHANGES">PROP_PAGECHANGES</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying how many changes is any given IP address
  allowed to do per minute.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_SIMILARCHANGES">PROP_SIMILARCHANGES</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying how many similar changes are allowed before a host is banned.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#PROP_WORDLIST">PROP_WORDLIST</a></span></code></th>
<td class="col-last">
<div class="block">The filter property name for specifying the page which contains the list of spamwords.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#STRATEGY_EAGER">STRATEGY_EAGER</a></span></code></th>
<td class="col-last">
<div class="block">The string specifying the "eager" strategy.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#STRATEGY_SCORE">STRATEGY_SCORE</a></span></code></th>
<td class="col-last">
<div class="block">The string specifying the "score" strategy.</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="inherited-list">
<h3 id="fields.inherited.from.class.org.apache.wiki.api.filters.BasePageFilter">Fields inherited from class&nbsp;org.apache.wiki.api.filters.<a href="../api/filters/BasePageFilter.html" title="class in org.apache.wiki.api.filters">BasePageFilter</a></h3>
<code><a href="../api/filters/BasePageFilter.html#m_engine">m_engine</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E()">SpamFilter</a></span>()</code></th>
<td class="col-last">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="table-tab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>static boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#checkHash(org.apache.wiki.api.core.Context,javax.servlet.jsp.PageContext)">checkHash</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
javax.servlet.jsp.PageContext&nbsp;pageContext)</code></th>
<td class="col-last">
<div class="block">This method checks if the hash value is still valid, i.e. if it exists at all.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getBotFieldName()">getBotFieldName</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns a static string which can be used to detect spambots which just wildly fill in all the fields.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getHashFieldName(javax.servlet.http.HttpServletRequest)">getHashFieldName</a></span>&#8203;(javax.servlet.http.HttpServletRequest&nbsp;request)</code></th>
<td class="col-last">
<div class="block">Returns the name of the hash field to be used in this request.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getSpamHash(org.apache.wiki.api.core.Page,javax.servlet.http.HttpServletRequest)">getSpamHash</a></span>&#8203;(<a href="../api/core/Page.html" title="interface in org.apache.wiki.api.core">Page</a>&nbsp;page,
javax.servlet.http.HttpServletRequest&nbsp;request)</code></th>
<td class="col-last">
<div class="block">This method is used to calculate an unique code when submitting the page to detect edit conflicts.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#initialize(org.apache.wiki.api.core.Engine,java.util.Properties)">initialize</a></span>&#8203;(<a href="../api/core/Engine.html" title="interface in org.apache.wiki.api.core">Engine</a>&nbsp;engine,
java.util.Properties&nbsp;properties)</code></th>
<td class="col-last">
<div class="block">If you override this, you should call super.initialize() first.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code>static java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#insertInputFields(javax.servlet.jsp.PageContext)">insertInputFields</a></span>&#8203;(javax.servlet.jsp.PageContext&nbsp;pageContext)</code></th>
<td class="col-last">
<div class="block">This helper method adds all the input fields to your editor that the SpamFilter requires
 to check for spam.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isValidUserProfile(org.apache.wiki.api.core.Context,org.apache.wiki.auth.user.UserProfile)">isValidUserProfile</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
<a href="../auth/user/UserProfile.html" title="interface in org.apache.wiki.auth.user">UserProfile</a>&nbsp;profile)</code></th>
<td class="col-last">
<div class="block">Checks whether the UserProfile matches certain checks.</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>java.lang.String</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#preSave(org.apache.wiki.api.core.Context,java.lang.String)">preSave</a></span>&#8203;(<a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
java.lang.String&nbsp;content)</code></th>
<td class="col-last">
<div class="block">This method is called before the page has been saved to the PageProvider.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.org.apache.wiki.api.filters.PageFilter">Methods inherited from interface&nbsp;org.apache.wiki.api.filters.<a href="../api/filters/PageFilter.html" title="interface in org.apache.wiki.api.filters">PageFilter</a></h3>
<code><a href="../api/filters/PageFilter.html#destroy(org.apache.wiki.api.core.Engine)">destroy</a>, <a href="../api/filters/PageFilter.html#postSave(org.apache.wiki.api.core.Context,java.lang.String)">postSave</a>, <a href="../api/filters/PageFilter.html#postTranslate(org.apache.wiki.api.core.Context,java.lang.String)">postTranslate</a>, <a href="../api/filters/PageFilter.html#preTranslate(org.apache.wiki.api.core.Context,java.lang.String)">preTranslate</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="PROP_WORDLIST">
<h3>PROP_WORDLIST</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.130">PROP_WORDLIST</a></span></div>
<div class="block">The filter property name for specifying the page which contains the list of spamwords. Value is <tt>"wordlist"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_WORDLIST">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_IPLIST">
<h3>PROP_IPLIST</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.133">PROP_IPLIST</a></span></div>
<div class="block">The filter property name for specifying the page which contains the list of IPs to ban. Value is <tt>"IPlist"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_IPLIST">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_MAX_PAGENAME_LENGTH">
<h3>PROP_MAX_PAGENAME_LENGTH</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.136">PROP_MAX_PAGENAME_LENGTH</a></span></div>
<div class="block">The filter property name for specifying the maximum page name length.  Value is <tt>"maxpagenamelength"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_MAX_PAGENAME_LENGTH">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_ERRORPAGE">
<h3>PROP_ERRORPAGE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.139">PROP_ERRORPAGE</a></span></div>
<div class="block">The filter property name for the page to which you are directed if Herb rejects your edit.  Value is <tt>"errorpage"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_ERRORPAGE">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_PAGECHANGES">
<h3>PROP_PAGECHANGES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.144">PROP_PAGECHANGES</a></span></div>
<div class="block">The filter property name for specifying how many changes is any given IP address
  allowed to do per minute.  Value is <tt>"pagechangesinminute"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_PAGECHANGES">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_SIMILARCHANGES">
<h3>PROP_SIMILARCHANGES</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.147">PROP_SIMILARCHANGES</a></span></div>
<div class="block">The filter property name for specifying how many similar changes are allowed before a host is banned.  Value is <tt>"similarchanges"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_SIMILARCHANGES">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_BANTIME">
<h3>PROP_BANTIME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.150">PROP_BANTIME</a></span></div>
<div class="block">The filter property name for specifying how long a host is banned.  Value is <tt>"bantime"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_BANTIME">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_BLACKLIST">
<h3>PROP_BLACKLIST</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.153">PROP_BLACKLIST</a></span></div>
<div class="block">The filter property name for the attachment containing the blacklist.  Value is <tt>"blacklist"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_BLACKLIST">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_MAXURLS">
<h3>PROP_MAXURLS</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.156">PROP_MAXURLS</a></span></div>
<div class="block">The filter property name for specifying how many URLs can any given edit contain. Value is <tt>"maxurls"</tt></div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_MAXURLS">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_AKISMET_API_KEY">
<h3>PROP_AKISMET_API_KEY</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.159">PROP_AKISMET_API_KEY</a></span></div>
<div class="block">The filter property name for specifying the Akismet API-key.  Value is <tt>"akismet-apikey"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_AKISMET_API_KEY">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_IGNORE_AUTHENTICATED">
<h3>PROP_IGNORE_AUTHENTICATED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.162">PROP_IGNORE_AUTHENTICATED</a></span></div>
<div class="block">The filter property name for specifying whether authenticated users should be ignored. Value is <tt>"ignoreauthenticated"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_IGNORE_AUTHENTICATED">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_CAPTCHA">
<h3>PROP_CAPTCHA</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.165">PROP_CAPTCHA</a></span></div>
<div class="block">The filter property name for specifying which captcha technology should be used. Value is <tt>"captcha"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_CAPTCHA">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="PROP_FILTERSTRATEGY">
<h3>PROP_FILTERSTRATEGY</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.168">PROP_FILTERSTRATEGY</a></span></div>
<div class="block">The filter property name for specifying which filter strategy should be used.  Value is <tt>"strategy"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.PROP_FILTERSTRATEGY">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="STRATEGY_EAGER">
<h3>STRATEGY_EAGER</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.171">STRATEGY_EAGER</a></span></div>
<div class="block">The string specifying the "eager" strategy. Value is <tt>"eager"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.STRATEGY_EAGER">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="STRATEGY_SCORE">
<h3>STRATEGY_SCORE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.174">STRATEGY_SCORE</a></span></div>
<div class="block">The string specifying the "score" strategy. Value is <tt>"score"</tt>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.filters.SpamFilter.STRATEGY_SCORE">Constant Field Values</a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>SpamFilter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.110">SpamFilter</a></span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="initialize(org.apache.wiki.api.core.Engine,java.util.Properties)">
<h3>initialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.239">initialize</a></span>&#8203;(<span class="parameters"><a href="../api/core/Engine.html" title="interface in org.apache.wiki.api.core">Engine</a>&nbsp;engine,
java.util.Properties&nbsp;properties)</span></div>
<div class="block">If you override this, you should call super.initialize() first.

 Is called whenever the a new PageFilter is instantiated and reset.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../api/filters/PageFilter.html#initialize(org.apache.wiki.api.core.Engine,java.util.Properties)">initialize</a></code>&nbsp;in interface&nbsp;<code><a href="../api/filters/PageFilter.html" title="interface in org.apache.wiki.api.filters">PageFilter</a></code></dd>
<dt>Overrides:</dt>
<dd><code><a href="../api/filters/BasePageFilter.html#initialize(org.apache.wiki.api.core.Engine,java.util.Properties)">initialize</a></code>&nbsp;in class&nbsp;<code><a href="../api/filters/BasePageFilter.html" title="class in org.apache.wiki.api.filters">BasePageFilter</a></code></dd>
<dt>Parameters:</dt>
<dd><code>engine</code> - The Engine which owns this PageFilter</dd>
<dd><code>properties</code> - The properties ripped from filters.xml.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="preSave(org.apache.wiki.api.core.Context,java.lang.String)">
<h3>preSave</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.298">preSave</a></span>&#8203;(<span class="parameters"><a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
java.lang.String&nbsp;content)</span>
                         throws <span class="exceptions"><a href="../api/exceptions/RedirectException.html" title="class in org.apache.wiki.api.exceptions">RedirectException</a></span></div>
<div class="block">This method is called before the page has been saved to the PageProvider.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The WikiContext</dd>
<dd><code>content</code> - The wikimarkup that the user just wanted to save.</dd>
<dt>Returns:</dt>
<dd>The modified wikimarkup. Default implementation returns the markup as received.</dd>
<dt>Throws:</dt>
<dd><code><a href="../api/exceptions/RedirectException.html" title="class in org.apache.wiki.api.exceptions">RedirectException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBotFieldName()">
<h3>getBotFieldName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.585">getBotFieldName</a></span>()</div>
<div class="block">Returns a static string which can be used to detect spambots which just wildly fill in all the fields.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A string</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isValidUserProfile(org.apache.wiki.api.core.Context,org.apache.wiki.auth.user.UserProfile)">
<h3>isValidUserProfile</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.901">isValidUserProfile</a></span>&#8203;(<span class="parameters"><a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
<a href="../auth/user/UserProfile.html" title="interface in org.apache.wiki.auth.user">UserProfile</a>&nbsp;profile)</span></div>
<div class="block">Checks whether the UserProfile matches certain checks.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>profile</code> - The profile to check</dd>
<dd><code>context</code> - The WikiContext</dd>
<dt>Returns:</dt>
<dd>False, if this userprofile is suspect and should not be allowed to be added.</dd>
<dt>Since:</dt>
<dd>2.6.1</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSpamHash(org.apache.wiki.api.core.Page,javax.servlet.http.HttpServletRequest)">
<h3>getSpamHash</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.923">getSpamHash</a></span>&#8203;(<span class="parameters"><a href="../api/core/Page.html" title="interface in org.apache.wiki.api.core">Page</a>&nbsp;page,
javax.servlet.http.HttpServletRequest&nbsp;request)</span></div>
<div class="block">This method is used to calculate an unique code when submitting the page to detect edit conflicts.  
  It currently incorporates the last-modified date of the page, and the IP address of the submitter.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>page</code> - The WikiPage under edit</dd>
<dd><code>request</code> - The HTTP Request</dd>
<dt>Returns:</dt>
<dd>A hash value for this page and session</dd>
<dt>Since:</dt>
<dd>2.6</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHashFieldName(javax.servlet.http.HttpServletRequest)">
<h3>getHashFieldName</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.942">getHashFieldName</a></span>&#8203;(<span class="parameters">javax.servlet.http.HttpServletRequest&nbsp;request)</span></div>
<div class="block">Returns the name of the hash field to be used in this request. The value is unique per session, and once 
  the session has expired, you cannot edit anymore.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>request</code> - The page request</dd>
<dt>Returns:</dt>
<dd>The name to be used in the hash field</dd>
<dt>Since:</dt>
<dd>2.6</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkHash(org.apache.wiki.api.core.Context,javax.servlet.jsp.PageContext)">
<h3>checkHash</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.977">checkHash</a></span>&#8203;(<span class="parameters"><a href="../api/core/Context.html" title="interface in org.apache.wiki.api.core">Context</a>&nbsp;context,
javax.servlet.jsp.PageContext&nbsp;pageContext)</span>
                         throws <span class="exceptions">java.io.IOException</span></div>
<div class="block">This method checks if the hash value is still valid, i.e. if it exists at all. This can occur in two cases: 
  either this is a spam bot which is not adaptive, or it is someone who has been editing one page for too long, 
  and their session has expired.
  <p>
  This method puts a redirect to the http response field to page "SessionExpired" and logs the incident in 
  the spam log (it may or may not be spam, but it's rather likely that it is).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The WikiContext</dd>
<dd><code>pageContext</code> - The JSP PageContext.</dd>
<dt>Returns:</dt>
<dd>True, if hash is okay.  False, if hash is not okay, and you need to redirect.</dd>
<dt>Throws:</dt>
<dd><code>java.io.IOException</code> - If redirection fails</dd>
<dt>Since:</dt>
<dd>2.6</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="insertInputFields(javax.servlet.jsp.PageContext)">
<h3>insertInputFields</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">java.lang.String</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/filters/SpamFilter.html#line.1000">insertInputFields</a></span>&#8203;(<span class="parameters">javax.servlet.jsp.PageContext&nbsp;pageContext)</span></div>
<div class="block">This helper method adds all the input fields to your editor that the SpamFilter requires
 to check for spam.  This <i>must</i> be in your editor form if you intend to use the SpamFilter.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pageContext</code> - The PageContext</dd>
<dt>Returns:</dt>
<dd>A HTML string which contains input fields for the SpamFilter.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/SpamFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright Â© 2001-2020 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>