<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>MailUtil (Apache JSPWiki 2.11.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MailUtil (Apache JSPWiki 2.11.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MailUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.wiki.util</a></div>
<h2 title="Class MailUtil" class="title">Class MailUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.wiki.util.MailUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<object type="image/svg+xml" data="MailUtil.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public final class <a href="../../../../src-html/org/apache/wiki/util/MailUtil.html#line.188">MailUtil</a>
extends java.lang.Object</pre>
<div class="block"><p>Contains static methods for sending e-mails to recipients using JNDI-supplied
 <a href="http://java.sun.com/products/javamail/">JavaMail</a>
 Sessions supplied by a web container (preferred) or configured via
 <code>jspwiki.properties</code>; both methods are described below.
 Because most e-mail servers require authentication,
 for security reasons implementors are <em>strongly</em> encouraged to use
 container-managed JavaMail Sessions so that passwords are not exposed in
 <code>jspwiki.properties</code>.</p>
 <p>To enable e-mail functions within JSPWiki, administrators must do three things:
 ensure that the required JavaMail JARs are on the runtime classpath, configure
 JavaMail appropriately, and (recommdended) configure the JNDI JavaMail session factory.</p>
 <strong>JavaMail runtime JARs</strong>
 <p>The first step is easy: JSPWiki bundles
 recent versions of the required JavaMail <code>mail.jar</code> and
 <code>activation.jar</code> into the JSPWiki WAR file; so, out of the box
 this is already taken care of. However, when using JNDI-supplied
 Session factories, these should be moved, <em>not copied</em>, to a classpath location
 where the JARs can be shared by both the JSPWiki webapp and the container. For example,
 Tomcat 5 provides the directory <code><var>$CATALINA_HOME</var>/common/lib</code>
 for storage of shared JARs; move <code>mail.jar</code> and <code>activation.jar</code>
 there instead of keeping them in <code>/WEB-INF/lib</code>.</p>
 <strong>JavaMail configuration</strong>
 <p>Regardless of the method used for supplying JavaMail sessions (JNDI container-managed
 or via <code>jspwiki.properties</code>, JavaMail needs certain properties
 set in order to work correctly. Configurable properties are these:</p>
 <table border="1">
   <tr>
   <thead>
     <th>Property</th>
     <th>Default</th>
     <th>Definition</th>
   <thead>
   </tr>
   <tr>
     <td><code>jspwiki.mail.jndiname</code></td>
     <td><code>mail/Session</code></td>
     <td>The JNDI name of the JavaMail session factory</td>
   </tr>
   <tr>
     <td><code>mail.smtp.host</code></td>
     <td><code>127.0.0.1</code></td>
     <td>The SMTP mail server from which messages will be sent.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.port</code></td>
     <td><code>25</code></td>
     <td>The port number of the SMTP mail service.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.account</code></td>
     <td>(not set)</td>
     <td>The user name of the sender. If this value is supplied, the JavaMail
     session will attempt to authenticate to the mail server before sending
     the message. If not supplied, JavaMail will attempt to send the message
     without authenticating (i.e., it will use the server as an open relay).
     In real-world scenarios, you should set this value.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.password</code></td>
     <td>(not set)</td>
     <td>The password of the sender. In real-world scenarios, you
     should set this value.</td>
   </tr>
   <tr>
     <td><code>mail.from</code></td>
     <td><code><var>${user.name}</var>@<var>${mail.smtp.host}</var>*</code></td>
     <td>The e-mail address of the sender.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.timeout</code></td>
     <td><code>5000*</code></td>
     <td>Socket I/O timeout value, in milliseconds. The default is 5 seconds.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.connectiontimeout</code></td>
     <td><code>5000*</code></td>
     <td>Socket connection timeout value, in milliseconds. The default is 5 seconds.</td>
   </tr>
   <tr>
     <td><code>mail.smtp.starttls.enable</code></td>
     <td><code>true*</code></td>
     <td>If true, enables the use of the STARTTLS command (if
     supported by the server) to switch the connection to a
     TLS-protected connection before issuing any login commands.
     Note that an appropriate trust store must configured so that
     the client will trust the server's certificate. By default,
     the JRE trust store contains root CAs for most public certificate
     authorities.</td>
   </tr>
 </table>
 <p>*These defaults apply only if the stand-alone Session factory is used
 (that is, these values are obtained from <code>jspwiki.properties</code>).
 If using a container-managed JNDI Session factory, the container will
 likely supply its own default values, and you should probably override
 them (see the next section).</p>
 <strong>Container JNDI Session factory configuration</strong>
 <p>You are strongly encouraged to use a container-managed JNDI factory for
 JavaMail sessions, rather than configuring JavaMail through <code>jspwiki.properties</code>.
 To do this, you need to two things: uncomment the <code>&lt;resource-ref&gt;</code> block
 in <code>/WEB-INF/web.xml</code> that enables container-managed JavaMail, and
 configure your container's JavaMail resource factory. The <code>web.xml</code>
 part is easy: just uncomment the section that looks like this:</p>
 <pre>&lt;resource-ref&gt;
   &lt;description>Resource reference to a container-managed JNDI JavaMail factory for sending e-mails.&lt;/description&gt;
   &lt;res-ref-name>mail/Session&lt;/res-ref-name&gt;
   &lt;res-type>javax.mail.Session&lt;/res-type&gt;
   &lt;res-auth>Container&lt;/res-auth&gt;
 &lt;/resource-ref&gt;</pre>
 <p>To configure your container's resource factory, follow the directions supplied by
 your container's documentation. For example, the
 <a href="http://tomcat.apache.org/tomcat-5.5-doc/jndi-resources-howto.html#JavaMail%20Sessions">Tomcat
 5.5 docs</a> state that you need a properly configured <code>&lt;Resource&gt;</code>
 element inside the JSPWiki webapp's <code>&lt;Context&gt;</code> declaration. Here's an example shows
 how to do it:</p>
 <pre>&lt;Context ...&gt;
 ...
 &lt;Resource name="mail/Session" auth="Container"
           type="javax.mail.Session"
           mail.smtp.host="127.0.0.1"/&gt;
           mail.smtp.port="25"/&gt;
           mail.smtp.account="your-account-name"/&gt;
           mail.smtp.password="your-password"/&gt;
           mail.from="Snoop Dogg &lt;snoop@dogg.org&gt;"/&gt;
           mail.smtp.timeout="5000"/&gt;
           mail.smtp.connectiontimeout="5000"/&gt;
           mail.smtp.starttls.enable="true"/&gt;
 ...
 &lt;/Context&gt;</pre>
 <p>Note that with Tomcat (and most other application containers) you can also declare the JavaMail
 JNDI factory as a global resource, shared by all applications, instead of as a local JSPWiki
 resource as we have done here. For example, the following entry in
 <code><var>$CATALINA_HOME</var>/conf/server.xml</code> creates a global resource:</p>
 <pre>&lt;GlobalNamingResources&gt;
   &lt;Resource name="mail/Session" auth="Container"
             type="javax.mail.Session"
             ...
             mail.smtp.starttls.enable="true"/&gt;
 &lt;/GlobalNamingResources&gt;</pre>
 <p>This approach &#8212; creating a global JNDI resource &#8212; yields somewhat decreased
 deployment complexity because the JSPWiki webapp no longer needs its own JavaMail resource
 declaration. However, it is slightly less secure because it means that all other applications
 can now obtain a JavaMail session if they want to. In many cases, this <em>is</em> what
 you want.</p>
 <p>NOTE: Versions of Tomcat 5.5 later than 5.5.17, and up to and including 5.5.23 have a
 b0rked version of <code><var>$CATALINA_HOME</var>/common/lib/naming-factory.jar</code>
 that prevents usage of JNDI. To avoid this problem, you should patch your 5.5.23 version
 of <code>naming-factory.jar</code> with the one from 5.5.17. This is a known issue
 and the bug report (#40668) is
 <a href="http://issues.apache.org/bugzilla/show_bug.cgi?id=40668">here</a>.</div>
</li>
</ul>
</div>
<div class="summary" style="clear:right;">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="MailUtil.SmtpAuthenticator.html" title="class in org.apache.wiki.util">MailUtil.SmtpAuthenticator</a></span></code></th>
<td class="colLast">
<div class="block">Simple <code>Authenticator</code> subclass that authenticates a user to
 an SMTP server.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sendMessage(java.util.Properties,java.lang.String,java.lang.String,java.lang.String)">sendMessage</a></span>&#8203;(java.util.Properties&nbsp;props,
           java.lang.String&nbsp;to,
           java.lang.String&nbsp;subject,
           java.lang.String&nbsp;content)</code></th>
<td class="colLast">
<div class="block">Sends an e-mail to a specified receiver using a JavaMail Session supplied
 by a JNDI mail session factory (preferred) or a locally initialized
 session based on properties in <code>jspwiki.properties</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="sendMessage(java.util.Properties,java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>sendMessage</h4>
<pre class="methodSignature">public static&nbsp;void&nbsp;<a href="../../../../src-html/org/apache/wiki/util/MailUtil.html#line.266">sendMessage</a>&#8203;(java.util.Properties&nbsp;props,
                               java.lang.String&nbsp;to,
                               java.lang.String&nbsp;subject,
                               java.lang.String&nbsp;content)
                        throws javax.mail.internet.AddressException,
                               javax.mail.MessagingException</pre>
<div class="block"><p>Sends an e-mail to a specified receiver using a JavaMail Session supplied
 by a JNDI mail session factory (preferred) or a locally initialized
 session based on properties in <code>jspwiki.properties</code>.
 See the top-level JavaDoc for this class for a description of
 required properties and their default values.</p>
 <p>The e-mail address used for the <code>to</code> parameter must be in
 RFC822 format, as described in the JavaDoc for <code>InternetAddress</code>
 and more fully at
 <a href="http://www.freesoft.org/CIE/RFC/822/index.htm">http://www.freesoft.org/CIE/RFC/822/index.htm</a>.
 In other words, e-mail addresses should look like this:</p>
 <blockquote><code>Snoop Dog &lt;snoop.dog@shizzle.net&gt;<br/>
 snoop.dog@shizzle.net</code></blockquote>
 <p>Note that the first form allows a "friendly" user name to be supplied
 in addition to the actual e-mail address.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>props</code> - the properties that contain mail session properties</dd>
<dd><code>to</code> - the receiver</dd>
<dd><code>subject</code> - the subject line of the message</dd>
<dd><code>content</code> - the contents of the mail message, as plain text</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>javax.mail.internet.AddressException</code> - If the address is invalid</dd>
<dd><code>javax.mail.MessagingException</code> - If the message cannot be sent.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MailUtil.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright (c) 2001-2020 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</body>
</html>