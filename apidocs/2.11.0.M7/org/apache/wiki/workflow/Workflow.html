<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="es">
<head>
<!-- Generated by javadoc (15) on Mon Dec 14 21:04:57 CET 2020 -->
<title>Workflow (Apache JSPWiki 2.11.0.M7 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2020-12-14">
<meta name="description" content="declaration: package: org.apache.wiki.workflow, class: Workflow">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Workflow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.wiki.workflow</a></div>
<h1 title="Class Workflow" class="title">Class Workflow</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.wiki.workflow.Workflow</div>
</div>
<section class="description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></code></dd>
</dl>
<hr>
<object type="image/svg+xml" data="Workflow.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public class <a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.165">Workflow</a>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></pre>
<div class="block"><p>
 Sequence of <a href="Step.html" title="interface in org.apache.wiki.workflow"><code>Step</code></a> objects linked together. Workflows are always initialized with a message key that denotes the name of the
 Workflow, and a Principal that represents its owner.
 </p>
 <h2>Workflow lifecycle</h2>
 A Workflow's state (obtained by <a href="#getCurrentState()"><code>getCurrentState()</code></a>) will be one of the following:
 </p>
 <ul>
 <li><strong><a href="#CREATED"><code>CREATED</code></a></strong>: after the Workflow has been instantiated, but before it has been started using the <a href="#start()"><code>start()</code></a>
 method.</li>
 <li><strong><a href="#RUNNING"><code>RUNNING</code></a></strong>: after the Workflow has been started using the <a href="#start()"><code>start()</code></a> method, but before it has
 finished processing all Steps. Note that a Workflow can only be started once; attempting to start it again results in an
 IllegalStateException. Callers can place the Workflow into the WAITING state by calling <a href="#waitstate()"><code>waitstate()</code></a>.</li>
 <li><strong><a href="#WAITING"><code>WAITING</code></a></strong>: when the Workflow has temporarily paused, for example because of a pending Decision. Once the
 responsible actor decides what to do, the caller can change the Workflow back to the RUNNING state by calling the <a href="#restart()"><code>restart()</code></a>
 method (this is done automatically by the Decision class, for instance, when the <a href="Decision.html#decide(org.apache.wiki.workflow.Outcome)"><code>Decision.decide(Outcome)</code></a> method is invoked)</li>
 <li><strong><a href="#COMPLETED"><code>COMPLETED</code></a></strong>: after the Workflow has finished processing all Steps, without errors.</li>
 <li><strong><a href="#ABORTED"><code>ABORTED</code></a></strong>: if a Step has elected to abort the Workflow.</li>
 </ul>
 <h2>Steps and processing algorithm</h2>
 <p>
 Workflow Step objects can be of type <a href="Decision.html" title="class in org.apache.wiki.workflow"><code>Decision</code></a>, <a href="Task.html" title="class in org.apache.wiki.workflow"><code>Task</code></a> or other Step subclasses. Decisions require user input, while Tasks
 do not. See the <a href="Step.html" title="interface in org.apache.wiki.workflow"><code>Step</code></a> class for more details.
 </p>
 <p>
 After instantiating a new Workflow (but before telling it to <a href="#start()"><code>start()</code></a>), calling classes should specify the first Step by
 executing the <a href="#setFirstStep(org.apache.wiki.workflow.Step)"><code>setFirstStep(Step)</code></a> method. Additional Steps can be chained by invoking the first step's
 <a href="Step.html#addSuccessor(org.apache.wiki.workflow.Outcome,org.apache.wiki.workflow.Step)"><code>Step.addSuccessor(Outcome, Step)</code></a> method.
 </p>
 <p>
 When a Workflow's <code>start</code> method is invoked, the Workflow retrieves the first Step and processes it. This Step, and subsequent
 ones, are processed as follows:
 </p>
 <ul>
 <li>The Step's <a href="Step.html#start()"><code>Step.start()</code></a> method executes, which sets the start time.</li>
 <li>The Step's <a href="Step.html#execute()"><code>Step.execute()</code></a> method is called to begin processing, which will return an Outcome to indicate completion,
 continuation or errors:</li>
 <ul>
 <li><a href="Outcome.html#STEP_COMPLETE"><code>Outcome.STEP_COMPLETE</code></a> indicates that the execution method ran without errors, and that the Step should be considered
 "completed."</li>
 <li><a href="Outcome.html#STEP_CONTINUE"><code>Outcome.STEP_CONTINUE</code></a> indicates that the execution method ran without errors, but that the Step is not "complete" and should
 be put into the WAITING state.</li>
 <li><a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a> indicates that the execution method encountered errors, and should abort the Step <em>and</em> the
 Workflow as a whole. When this happens, the Workflow will set the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a> and invoke the
 Workflow's <a href="#abort()"><code>abort()</code></a> method. The Step's processing errors, if any, can be retrieved by <a href="Step.html#getErrors()"><code>Step.getErrors()</code></a>.</li>
 </ul>
 <li>The Outcome of the <code>execute</code> method also affects what happens next. Depending on the result (and assuming the Step did
 not abort), the Workflow will either move on to the next Step or put the Workflow into the <a href="#WAITING"><code>WAITING</code></a> state:</li>
 <ul>
 <li>If the Outcome denoted "completion" (<em>i.e.</em>, its <a href="Step.html#isCompleted()"><code>Step.isCompleted()</code></a> method returns <code>true</code>) then the Step
 is considered complete; the Workflow looks up the next Step by calling the current Step's <a href="Step.html#getSuccessor(org.apache.wiki.workflow.Outcome)"><code>Step.getSuccessor(Outcome)</code></a> method. If
 <code>successor()</code> returns a non-<code>null</code> Step, the return value is marked as the current Step and added to the Workflow's
 Step history. If <code>successor()</code> returns <code>null</code>, then the Workflow has no more Steps and it enters the
 <a href="#COMPLETED"><code>COMPLETED</code></a> state.</li>
 <li>If the Outcome did not denote "completion" (<em>i.e.</em>, its <a href="Step.html#isCompleted()"><code>Step.isCompleted()</code></a> method returns <code>false</code>), then
 the Step still has further work to do. The Workflow enters the <a href="#WAITING"><code>WAITING</code></a> state and stops further processing until a caller
 restarts it.</li>
 </ul>
 </ul>
 </p>
 <p>
 The currently executing Step can be obtained by <a href="#getCurrentStep()"><code>getCurrentStep()</code></a>. The actor for the current Step is returned by
 <a href="#getCurrentActor()"><code>getCurrentActor()</code></a>.
 </p>
 <p>
 To provide flexibility for specific implementations, the Workflow class provides two additional features that enable Workflow
 participants (<em>i.e.</em>, Workflow subclasses and Step/Task/Decision subclasses) to share context and state information. These two
 features are <em>named attributes</em> and <em>message arguments</em>:
 </p>
 <ul>
 <li><strong>Named attributes</strong> are simple key-value pairs that Workflow participants can get or set. Keys are Strings; values
 can be any Object. Named attributes are set with <a href="#setAttribute(java.lang.String,java.io.Serializable)"><code>setAttribute(String, Serializable)</code></a> and retrieved with <a href="#getAttribute(java.lang.String)"><code>getAttribute(String)</code></a>.</li>
 <li><strong>Message arguments</strong> are used in combination with JSPWiki's <a href="../i18n/InternationalizationManager.html" title="interface in org.apache.wiki.i18n"><code>InternationalizationManager</code></a> to
 create language-independent user interface messages. The message argument array is retrieved via <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>; the
 first two array elements will always be these: a String representing work flow owner's name, and a String representing the current
 actor's name. Workflow participants can add to this array by invoking <a href="#addMessageArgument(java.io.Serializable)"><code>addMessageArgument(Serializable)</code></a>.</li>
 </ul>
 <h2>Example</h2>
 <p>
 Workflow Steps can be very powerful when linked together. JSPWiki provides two abstract subclasses classes that you can use to build
 your own Workflows: Tasks and Decisions. As noted, Tasks are Steps that execute without user intervention, while Decisions require
 actors (<em>aka</em> Principals) to take action. Decisions and Tasks can be mixed freely to produce some highly elaborate branching
 structures.
 </p>
 <p>
 Here is a simple case. For example, suppose you would like to create a Workflow that (a) executes a initialization Task, (b) pauses to
 obtain an approval Decision from a user in the Admin group, and if approved, (c) executes a "finish" Task. Here's sample code that
 illustrates how to do it:
 </p>

 <pre>
    // Create workflow; owner is current user
 1  Workflow workflow = new Workflow( &quot; workflow.myworkflow &quot;, context.getCurrentUser() );

    // Create custom initialization task
 2  Step initTask = new InitTask( this );

    // Create finish task
 3  Step finishTask = new FinishTask( this );

    // Create an intermediate decision step
 4  Principal actor = new GroupPrincipal( &quot;Admin&quot; );
 5  Step decision = new SimpleDecision( this, &quot;decision.AdminDecision&quot;, actor );

    // Hook the steps together
 6  initTask.addSuccessor( Outcome.STEP_COMPLETE, decision );
 7  decision.addSuccessor( Outcome.DECISION_APPROVE, finishTask );

    // Set workflow's first step
 8  workflow.setFirstStep( initTask );
 </pre>

 <p>
 Some comments on the source code:
 </p>
 <ul>
 <li>Line 1 instantiates the workflow with a sample message key and designated owner Principal, in this case the current wiki user</li>
 <li>Lines 2 and 3 instantiate the custom Task subclasses, which contain the business logic</li>
 <li>Line 4 creates the relevant GroupPrincipal for the <code>Admin</code> group, who will be the actor in the Decision step</li>
 <li>Line 5 creates the Decision step, passing the Workflow, sample message key, and actor in the constructor</li>
 <li>Line 6 specifies that if the InitTask's Outcome signifies "normal completion" (STEP_COMPLETE), the SimpleDecision step should be
 invoked next</li>
 <li>Line 7 specifies that if the actor (anyone possessing the <code>Admin</code> GroupPrincipal) selects DECISION_APPROVE, the FinishTask
 step should be invoked</li>
 <li>Line 8 adds the InitTask (and all of its successor Steps, nicely wired together) to the workflow</li>
 </ul></div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../serialized-form.html#org.apache.wiki.workflow.Workflow">Serialized Form</a></dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#ABORTED">ABORTED</a></span></code></th>
<td class="col-last">
<div class="block">State value: Workflow aborted before completion.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#COMPLETED">COMPLETED</a></span></code></th>
<td class="col-last">
<div class="block">State value: Workflow completed all Steps without errors.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#CREATED">CREATED</a></span></code></th>
<td class="col-last">
<div class="block">State value: Workflow instantiated, but not started.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#ID_NOT_SET">ID_NOT_SET</a></span></code></th>
<td class="col-last">
<div class="block">ID value: the workflow ID has not been set.</div>
</td>
</tr>
<tr class="alt-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#RUNNING">RUNNING</a></span></code></th>
<td class="col-last">
<div class="block">State value: Workflow started, and is running.</div>
</td>
</tr>
<tr class="row-color">
<td class="col-first"><code>static int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#WAITING">WAITING</a></span></code></th>
<td class="col-last">
<div class="block">State value: Workflow paused, typically because a Step returned an Outcome that doesn't signify "completion."</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Constructors</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Constructor</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<th class="col-constructor-name" scope="row"><code><span class="member-name-link"><a href="#%3Cinit%3E(java.lang.String,java.security.Principal)">Workflow</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;messageKey,
<a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a>&nbsp;owner)</code></th>
<td class="col-last">
<div class="block">Constructs a new Workflow object with a supplied message key, owner Principal, and undefined unique identifier <a href="#ID_NOT_SET"><code>ID_NOT_SET</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="table-tab" onclick="show(8);">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#abort()">abort</a></span>()</code></th>
<td class="col-last">
<div class="block">Aborts the Workflow by setting the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a>, and the Workflow's overall state to
 <a href="#ABORTED"><code>ABORTED</code></a>.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#addMessageArgument(java.io.Serializable)">addMessageArgument</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&nbsp;obj)</code></th>
<td class="col-last">
<div class="block">Appends a message argument object to the array returned by <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>protected void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#cleanup()">cleanup</a></span>()</code></th>
<td class="col-last">
<div class="block">Clears the attribute map and sets the current step field to <code>null</code>.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code>protected void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#complete()">complete</a></span>()</code></th>
<td class="col-last">
<div class="block">Protected helper method that changes the Workflow's state to <a href="#COMPLETED"><code>COMPLETED</code></a> and sets the current Step to <code>null</code>.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getAttribute(java.lang.String)">getAttribute</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;attr)</code></th>
<td class="col-last">
<div class="block">Retrieves a named Object associated with this Workflow.</div>
</td>
</tr>
<tr class="row-color" id="i5">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getAttributes()">getAttributes</a></span>()</code></th>
<td class="col-last">
<div class="block">Retrieves workflow's attributes.</div>
</td>
</tr>
<tr class="alt-color" id="i6">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getCurrentActor()">getCurrentActor</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the actor Principal responsible for the current Step.</div>
</td>
</tr>
<tr class="row-color" id="i7">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getCurrentState()">getCurrentState</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the workflow state: <a href="#CREATED"><code>CREATED</code></a>, <a href="#RUNNING"><code>RUNNING</code></a>, <a href="#WAITING"><code>WAITING</code></a>, <a href="#COMPLETED"><code>COMPLETED</code></a> or <a href="#ABORTED"><code>ABORTED</code></a>.</div>
</td>
</tr>
<tr class="alt-color" id="i8">
<td class="col-first"><code><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getCurrentStep()">getCurrentStep</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the current Step, or <code>null</code> if the workflow has not started or already completed.</div>
</td>
</tr>
<tr class="row-color" id="i9">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html" title="class or interface in java.util" class="external-link">Date</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getEndTime()">getEndTime</a></span>()</code></th>
<td class="col-last">
<div class="block">The end time for this Workflow, expressed as a system time number.</div>
</td>
</tr>
<tr class="alt-color" id="i10">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&gt;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getHistory()">getHistory</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns a Step history for this Workflow as a List, chronologically, from the first Step to the currently executing one.</div>
</td>
</tr>
<tr class="row-color" id="i11">
<td class="col-first"><code>int</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getId()">getId</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns the unique identifier for this Workflow.</div>
</td>
</tr>
<tr class="alt-color" id="i12">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>[]</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getMessageArguments()">getMessageArguments</a></span>()</code></th>
<td class="col-last">
<div class="block">
 Returns an array of message arguments, used by <a href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html" title="class or interface in java.text" class="external-link"><code>MessageFormat</code></a> to create localized messages.</div>
</td>
</tr>
<tr class="row-color" id="i13">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getMessageKey()">getMessageKey</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns an i18n message key for the name of this workflow; for example,
 <code>workflow.saveWikiPage</code>.</div>
</td>
</tr>
<tr class="alt-color" id="i14">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getOwner()">getOwner</a></span>()</code></th>
<td class="col-last">
<div class="block">The owner Principal on whose behalf this Workflow is being executed; that is, the user who created the workflow.</div>
</td>
</tr>
<tr class="row-color" id="i15">
<td class="col-first"><code><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getPreviousStep()">getPreviousStep</a></span>()</code></th>
<td class="col-last">
<div class="block">Convenience method that returns the predecessor of the current Step.</div>
</td>
</tr>
<tr class="alt-color" id="i16">
<td class="col-first"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html" title="class or interface in java.util" class="external-link">Date</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#getStartTime()">getStartTime</a></span>()</code></th>
<td class="col-last">
<div class="block">The start time for this Workflow, expressed as a system time number.</div>
</td>
</tr>
<tr class="row-color" id="i17">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isAborted()">isAborted</a></span>()</code></th>
<td class="col-last">
<div class="block">Returns <code>true</code> if the workflow had been previously aborted.</div>
</td>
</tr>
<tr class="alt-color" id="i18">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isCompleted()">isCompleted</a></span>()</code></th>
<td class="col-last">
<div class="block">Determines whether this Workflow is completed; that is, if it has no additional Steps to perform.</div>
</td>
</tr>
<tr class="row-color" id="i19">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isStarted()">isStarted</a></span>()</code></th>
<td class="col-last">
<div class="block">Determines whether this Workflow has started; that is, its <a href="#start()"><code>start()</code></a> method has been executed.</div>
</td>
</tr>
<tr class="alt-color" id="i20">
<td class="col-first"><code>protected <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#previousStep(org.apache.wiki.workflow.Step)">previousStep</a></span>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</code></th>
<td class="col-last">
<div class="block">Protected method that returns the predecessor for a supplied Step.</div>
</td>
</tr>
<tr class="row-color" id="i21">
<td class="col-first"><code>protected void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#processCurrentStep()">processCurrentStep</a></span>()</code></th>
<td class="col-last">
<div class="block">Protected method that processes the current Step by calling <a href="Step.html#execute()"><code>Step.execute()</code></a>.</div>
</td>
</tr>
<tr class="alt-color" id="i22">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#restart()">restart</a></span>()</code></th>
<td class="col-last">
<div class="block">Restarts the Workflow from the <a href="#WAITING"><code>WAITING</code></a> state and puts it into the <a href="#RUNNING"><code>RUNNING</code></a> state again.</div>
</td>
</tr>
<tr class="row-color" id="i23">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setAttribute(java.lang.String,java.io.Serializable)">setAttribute</a></span>&#8203;(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;attr,
<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&nbsp;obj)</code></th>
<td class="col-last">
<div class="block">Temporarily associates an object with this Workflow, as a named attribute, for the duration of workflow execution.</div>
</td>
</tr>
<tr class="alt-color" id="i24">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setFirstStep(org.apache.wiki.workflow.Step)">setFirstStep</a></span>&#8203;(<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</code></th>
<td class="col-last">
<div class="block">Sets the first Step for this Workflow, which will be executed immediately
 after the <a href="#start()"><code>start()</code></a> method executes.</div>
</td>
</tr>
<tr class="row-color" id="i25">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setId(int)">setId</a></span>&#8203;(int&nbsp;id)</code></th>
<td class="col-last">
<div class="block">Sets the unique identifier for this Workflow.</div>
</td>
</tr>
<tr class="alt-color" id="i26">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#start()">start</a></span>()</code></th>
<td class="col-last">
<div class="block">Starts the Workflow and sets the state to <a href="#RUNNING"><code>RUNNING</code></a>.</div>
</td>
</tr>
<tr class="row-color" id="i27">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#waitstate()">waitstate</a></span>()</code></th>
<td class="col-last">
<div class="block">Sets the Workflow in the <a href="#WAITING"><code>WAITING</code></a> state.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ID_NOT_SET">
<h3>ID_NOT_SET</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.172">ID_NOT_SET</a></span></div>
<div class="block">ID value: the workflow ID has not been set.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.ID_NOT_SET">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="COMPLETED">
<h3>COMPLETED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.175">COMPLETED</a></span></div>
<div class="block">State value: Workflow completed all Steps without errors.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.COMPLETED">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ABORTED">
<h3>ABORTED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.178">ABORTED</a></span></div>
<div class="block">State value: Workflow aborted before completion.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.ABORTED">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="WAITING">
<h3>WAITING</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.181">WAITING</a></span></div>
<div class="block">State value: Workflow paused, typically because a Step returned an Outcome that doesn't signify "completion."</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.WAITING">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="RUNNING">
<h3>RUNNING</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.184">RUNNING</a></span></div>
<div class="block">State value: Workflow started, and is running.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.RUNNING">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="CREATED">
<h3>CREATED</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.187">CREATED</a></span></div>
<div class="block">State value: Workflow instantiated, but not started.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd><a href="../../../../constant-values.html#org.apache.wiki.workflow.Workflow.CREATED">Constant Field Values</a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.String,java.security.Principal)">
<h3>Workflow</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.220">Workflow</a></span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;messageKey,
<a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a>&nbsp;owner)</span></div>
<div class="block">Constructs a new Workflow object with a supplied message key, owner Principal, and undefined unique identifier <a href="#ID_NOT_SET"><code>ID_NOT_SET</code></a>.
 Once instantiated the Workflow is considered to be in the <a href="#CREATED"><code>CREATED</code></a> state; a caller must explicitly invoke the
 <a href="#start()"><code>start()</code></a> method to begin processing.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>messageKey</code> - the message key used to construct a localized workflow name, such as <code>workflow.saveWikiPage</code></dd>
<dd><code>owner</code> - the Principal who owns the Workflow. Typically, this is the user who created and submitted it</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="abort()">
<h3>abort</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.240">abort</a></span>()</div>
<div class="block">Aborts the Workflow by setting the current Step's Outcome to <a href="Outcome.html#STEP_ABORT"><code>Outcome.STEP_ABORT</code></a>, and the Workflow's overall state to
 <a href="#ABORTED"><code>ABORTED</code></a>. It also appends the aborted Step into the workflow history, and sets the current step to <code>null</code>.
 If the Step is a Decision, it is removed from the DecisionQueue. This method can be called at any point in the lifecycle prior
 to completion, but it cannot be called twice. It finishes by calling the <a href="#cleanup()"><code>cleanup()</code></a> method to flush retained objects.
 If the Workflow had been previously aborted, this method throws an IllegalStateException.</div>
</section>
</li>
<li>
<section class="detail" id="addMessageArgument(java.io.Serializable)">
<h3>addMessageArgument</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.268">addMessageArgument</a></span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&nbsp;obj)</span></div>
<div class="block">Appends a message argument object to the array returned by <a href="#getMessageArguments()"><code>getMessageArguments()</code></a>. The object <em>must</em> be an type
 used by the <a href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html" title="class or interface in java.text" class="external-link"><code>MessageFormat</code></a>: String, Date, or Number (BigDecimal, BigInteger, Byte, Double, Float, Integer, Long,
 Short). If the object is not of type String, Number or Date, this method throws an IllegalArgumentException.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>obj</code> - the object to add</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentActor()">
<h3>getCurrentActor</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.282">getCurrentActor</a></span>()</div>
<div class="block">Returns the actor Principal responsible for the current Step. If there is
 no current Step, this method returns <code>null</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the current actor</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentState()">
<h3>getCurrentState</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.294">getCurrentState</a></span>()</div>
<div class="block">Returns the workflow state: <a href="#CREATED"><code>CREATED</code></a>, <a href="#RUNNING"><code>RUNNING</code></a>, <a href="#WAITING"><code>WAITING</code></a>, <a href="#COMPLETED"><code>COMPLETED</code></a> or <a href="#ABORTED"><code>ABORTED</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the workflow state</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCurrentStep()">
<h3>getCurrentStep</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.304">getCurrentStep</a></span>()</div>
<div class="block">Returns the current Step, or <code>null</code> if the workflow has not started or already completed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the current step</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAttribute(java.lang.String)">
<h3>getAttribute</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.316">getAttribute</a></span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;attr)</span></div>
<div class="block">Retrieves a named Object associated with this Workflow. If the Workflow has completed or aborted, this method always returns
 <code>null</code>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>attr</code> - the name of the attribute</dd>
<dt>Returns:</dt>
<dd>the value</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAttributes()">
<h3>getAttributes</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,&#8203;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&gt;</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.325">getAttributes</a></span>()</div>
<div class="block">Retrieves workflow's attributes.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>workflow's attributes.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEndTime()">
<h3>getEndTime</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html" title="class or interface in java.util" class="external-link">Date</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.335">getEndTime</a></span>()</div>
<div class="block">The end time for this Workflow, expressed as a system time number. This value is equal to the end-time value returned by the final
 Step's <a href="Step.html#getEndTime()"><code>Step.getEndTime()</code></a> method, if the workflow has completed. Otherwise, this method returns <a href="Step.html#TIME_NOT_SET"><code>Step.TIME_NOT_SET</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the end time</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getId()">
<h3>getId</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.350">getId</a></span>()</div>
<div class="block">Returns the unique identifier for this Workflow. If not set, this method returns ID_NOT_SET (<a href="#ID_NOT_SET">0</a>).</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the unique identifier</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessageArguments()">
<h3>getMessageArguments</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>[]</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.372">getMessageArguments</a></span>()</div>
<div class="block"><p>
 Returns an array of message arguments, used by <a href="https://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html" title="class or interface in java.text" class="external-link"><code>MessageFormat</code></a> to create localized messages. The first
 two array elements will always be these:
 </p>
 <ul>
 <li>String representing the name of the workflow owner (<em>i.e.</em>,<a href="#getOwner()"><code>getOwner()</code></a>)</li>
 <li>String representing the name of the current actor (<em>i.e.</em>,<a href="#getCurrentActor()"><code>getCurrentActor()</code></a>).
 If the current step is <code>null</code> because the workflow hasn't started or has already
 finished, the value of this argument will be a dash character (<code>-</code>)</li>
 </ul>
 <p>
 Workflow and Step subclasses are free to append items to this collection with <a href="#addMessageArgument(java.io.Serializable)"><code>addMessageArgument(Serializable)</code></a>.
 </p></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the array of message arguments</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getMessageKey()">
<h3>getMessageKey</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.387">getMessageKey</a></span>()</div>
<div class="block">Returns an i18n message key for the name of this workflow; for example,
 <code>workflow.saveWikiPage</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the name</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOwner()">
<h3>getOwner</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html" title="class or interface in java.security" class="external-link">Principal</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.397">getOwner</a></span>()</div>
<div class="block">The owner Principal on whose behalf this Workflow is being executed; that is, the user who created the workflow.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the name of the Principal who owns this workflow</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStartTime()">
<h3>getStartTime</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Date.html" title="class or interface in java.util" class="external-link">Date</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.409">getStartTime</a></span>()</div>
<div class="block">The start time for this Workflow, expressed as a system time number. This value is equal to the start-time value returned by the
 first Step's <a href="Step.html#getStartTime()"><code>Step.getStartTime()</code></a> method, if the workflow has started already. Otherwise, this method returns
 <a href="Step.html#TIME_NOT_SET"><code>Step.TIME_NOT_SET</code></a>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the start time</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getHistory()">
<h3>getHistory</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&gt;</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.420">getHistory</a></span>()</div>
<div class="block">Returns a Step history for this Workflow as a List, chronologically, from the first Step to the currently executing one. The first
 step is the first item in the array. If the Workflow has not started, this method returns a zero-length array.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>an array of Steps representing those that have executed, or are currently executing</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isAborted()">
<h3>isAborted</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.430">isAborted</a></span>()</div>
<div class="block">Returns <code>true</code> if the workflow had been previously aborted.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the result</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isCompleted()">
<h3>isCompleted</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.441">isCompleted</a></span>()</div>
<div class="block">Determines whether this Workflow is completed; that is, if it has no additional Steps to perform. If the last Step in the workflow is
 finished, this method will return <code>true</code>.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the workflow has been started but has no more steps to perform; <code>false</code> if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isStarted()">
<h3>isStarted</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.451">isStarted</a></span>()</div>
<div class="block">Determines whether this Workflow has started; that is, its <a href="#start()"><code>start()</code></a> method has been executed.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if the workflow has been started; <code>false</code> if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPreviousStep()">
<h3>getPreviousStep</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type"><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.462">getPreviousStep</a></span>()</div>
<div class="block">Convenience method that returns the predecessor of the current Step. This method simply examines the Workflow history and returns the
 second-to-last Step.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the predecessor, or <code>null</code> if the first Step is currently executing</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="restart()">
<h3>restart</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.474">restart</a></span>()
                   throws <span class="exceptions"><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></span></div>
<div class="block">Restarts the Workflow from the <a href="#WAITING"><code>WAITING</code></a> state and puts it into the <a href="#RUNNING"><code>RUNNING</code></a> state again. If the Workflow had not
 previously been paused, this method throws an IllegalStateException. If any of the Steps in this Workflow throw a WikiException,
 the Workflow will abort and propagate the exception to callers.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current task's <a href="AbstractStep.html#execute()"><code>AbstractStep.execute()</code></a> method throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setAttribute(java.lang.String,java.io.Serializable)">
<h3>setAttribute</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.499">setAttribute</a></span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;attr,
<a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a>&nbsp;obj)</span></div>
<div class="block">Temporarily associates an object with this Workflow, as a named attribute, for the duration of workflow execution. The passed
 object can be anything required by an executing Step, although it <em>should</em> be serializable. Note that when the workflow
 completes or aborts, all attributes will be cleared.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>attr</code> - the attribute name</dd>
<dd><code>obj</code> - the value</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setFirstStep(org.apache.wiki.workflow.Step)">
<h3>setFirstStep</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.511">setFirstStep</a></span>&#8203;(<span class="parameters"><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</span></div>
<div class="block">Sets the first Step for this Workflow, which will be executed immediately
 after the <a href="#start()"><code>start()</code></a> method executes. Note than the Step is not
 marked as the "current" step or added to the Workflow history until the
 <a href="#start()"><code>start()</code></a> method is called.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>step</code> - the first step for the workflow</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setId(int)">
<h3>setId</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.521">setId</a></span>&#8203;(<span class="parameters">int&nbsp;id)</span></div>
<div class="block">Sets the unique identifier for this Workflow.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - the unique identifier</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start()">
<h3>start</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.533">start</a></span>()
                 throws <span class="exceptions"><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></span></div>
<div class="block">Starts the Workflow and sets the state to <a href="#RUNNING"><code>RUNNING</code></a>. If the Workflow has already been started (or previously aborted), this
 method returns an <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a>. If any of the Steps in this Workflow throw a WikiException, the Workflow will
 abort and propagate the exception to callers.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current Step's <a href="Step.html#start()"><code>Step.start()</code></a> method throws an exception of any kind</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="waitstate()">
<h3>waitstate</h3>
<div class="member-signature"><span class="modifiers">public final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.562">waitstate</a></span>()</div>
<div class="block">Sets the Workflow in the <a href="#WAITING"><code>WAITING</code></a> state. If the Workflow is not running or has already been paused, this method throws an
 IllegalStateException. Once paused, the Workflow can be un-paused by executing the <a href="#restart()"><code>restart()</code></a> method.</div>
</section>
</li>
<li>
<section class="detail" id="cleanup()">
<h3>cleanup</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.573">cleanup</a></span>()</div>
<div class="block">Clears the attribute map and sets the current step field to <code>null</code>.</div>
</section>
</li>
<li>
<section class="detail" id="complete()">
<h3>complete</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.582">complete</a></span>()</div>
<div class="block">Protected helper method that changes the Workflow's state to <a href="#COMPLETED"><code>COMPLETED</code></a> and sets the current Step to <code>null</code>. It
 calls the <a href="#cleanup()"><code>cleanup()</code></a> method to flush retained objects. This method will no-op if it has previously been called.</div>
</section>
</li>
<li>
<section class="detail" id="previousStep(org.apache.wiki.workflow.Step)">
<h3>previousStep</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a></span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.596">previousStep</a></span>&#8203;(<span class="parameters"><a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;step)</span></div>
<div class="block">Protected method that returns the predecessor for a supplied Step.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>step</code> - the Step for which the predecessor is requested</dd>
<dt>Returns:</dt>
<dd>its predecessor, or <code>null</code> if the first Step was supplied.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processCurrentStep()">
<h3>processCurrentStep</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="member-name"><a href="../../../../src-html/org/apache/wiki/workflow/Workflow.html#line.607">processCurrentStep</a></span>()
                                 throws <span class="exceptions"><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></span></div>
<div class="block">Protected method that processes the current Step by calling <a href="Step.html#execute()"><code>Step.execute()</code></a>. If the <code>execute</code> throws an
 exception, this method will propagate the exception immediately to callers without aborting.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the current Step's <a href="Step.html#start()"><code>Step.start()</code></a> method throws an exception of any kind</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/Workflow.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright Â© 2001-2020 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>