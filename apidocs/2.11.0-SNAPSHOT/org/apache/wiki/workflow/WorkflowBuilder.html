<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.9) on Fri Jan 01 20:02:36 UTC 2021 -->
<title>WorkflowBuilder (Apache JSPWiki 2.11.0-SNAPSHOT API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-01-01">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WorkflowBuilder (Apache JSPWiki 2.11.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WorkflowBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.wiki.workflow</a></div>
<h2 title="Class WorkflowBuilder" class="title">Class WorkflowBuilder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.wiki.workflow.WorkflowBuilder</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<object type="image/svg+xml" data="WorkflowBuilder.svg"  style="max-width:60%;float:right;"></object>
<pre style="white-space:pre-wrap;">public final class <a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.31">WorkflowBuilder</a>
extends java.lang.Object</pre>
<div class="block">Factory class that creates common Workflow instances such as a standard approval workflow.</div>
</li>
</ul>
</div>
<div class="summary" style="clear:right;">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="Workflow.html" title="class in org.apache.wiki.workflow">Workflow</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#buildApprovalWorkflow(java.security.Principal,java.lang.String,org.apache.wiki.workflow.Step,java.lang.String,org.apache.wiki.workflow.Fact%5B%5D,org.apache.wiki.workflow.Step,java.lang.String)">buildApprovalWorkflow</a></span>&#8203;(java.security.Principal&nbsp;submitter,
                     java.lang.String&nbsp;workflowApproverKey,
                     <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;prepTask,
                     java.lang.String&nbsp;decisionKey,
                     <a href="Fact.html" title="class in org.apache.wiki.workflow">Fact</a>[]&nbsp;facts,
                     <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;completionTask,
                     java.lang.String&nbsp;rejectedMessageKey)</code></th>
<td class="colLast">
<div class="block">Builds an approval workflow that requests approval from a named
 user, <a href="../auth/authorize/Group.html" title="class in org.apache.wiki.auth.authorize"><code>Group</code></a> or
 <a href="../auth/authorize/Role.html" title="class in org.apache.wiki.auth.authorize"><code>Role</code></a> before running a Task.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="WorkflowBuilder.html" title="class in org.apache.wiki.workflow">WorkflowBuilder</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBuilder(org.apache.wiki.api.core.Engine)">getBuilder</a></span>&#8203;(<a href="../api/core/Engine.html" title="interface in org.apache.wiki.api.core">Engine</a>&nbsp;engine)</code></th>
<td class="colLast">
<div class="block">Returns the WorkflowBuilder instance for a Engine.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getBuilder(org.apache.wiki.api.core.Engine)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBuilder</h4>
<pre class="methodSignature">public static&nbsp;<a href="WorkflowBuilder.html" title="class in org.apache.wiki.workflow">WorkflowBuilder</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.51">getBuilder</a>&#8203;(<a href="../api/core/Engine.html" title="interface in org.apache.wiki.api.core">Engine</a>&nbsp;engine)</pre>
<div class="block">Returns the WorkflowBuilder instance for a Engine. Only one WorkflowBuilder
 exists for a given engine.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>engine</code> - the wiki engine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the workflow builder</dd>
</dl>
</li>
</ul>
<a id="buildApprovalWorkflow(java.security.Principal,java.lang.String,org.apache.wiki.workflow.Step,java.lang.String,org.apache.wiki.workflow.Fact[],org.apache.wiki.workflow.Step,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>buildApprovalWorkflow</h4>
<pre class="methodSignature">public&nbsp;<a href="Workflow.html" title="class in org.apache.wiki.workflow">Workflow</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.103">buildApprovalWorkflow</a>&#8203;(java.security.Principal&nbsp;submitter,
                                      java.lang.String&nbsp;workflowApproverKey,
                                      <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;prepTask,
                                      java.lang.String&nbsp;decisionKey,
                                      <a href="Fact.html" title="class in org.apache.wiki.workflow">Fact</a>[]&nbsp;facts,
                                      <a href="Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;completionTask,
                                      java.lang.String&nbsp;rejectedMessageKey)
                               throws <a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></pre>
<div class="block"><p>Builds an approval workflow that requests approval from a named
 user, <a href="../auth/authorize/Group.html" title="class in org.apache.wiki.auth.authorize"><code>Group</code></a> or
 <a href="../auth/authorize/Role.html" title="class in org.apache.wiki.auth.authorize"><code>Role</code></a> before running a Task.</p>
 <p>The Principal who approves the activity is determined by looking up
 the property <code>jspwiki.approver.<var>workflowApproverKey</var></code>
 in <code>jspwiki.properties</code>. If that Principal resolves to a known user, Group
 Role, a Decision will be placed in the respective workflow queue (or multiple queues,
 if necessary). Only one approver needs to make the Decision, and if the request is
 approved, the completion task will be executed. If the request is denied, a
 <a href="SimpleNotification.html" title="class in org.apache.wiki.workflow"><code>SimpleNotification</code></a> with a message corresponding to the <code>rejectedMessage</code>
 message key will be placed in the submitter's workflow queue.</p>
 <p>To help approvers determine how to make the Decision, callers can supply an
 array of Fact objects to this method, which will be added to the Decision in the order
 they appear in the array. These items will be displayed in the web UI.
 In addition, the value of the first Fact will also be added as the third message
 argument for the workflow (the first two are always the submitter and the approver).
 For example, the PageManager code that creates the "save page approval" workflow
 adds the name of the page as its first Fact; this results in the page name being
 substituted correctly into the resulting message:
 "Save wiki page &lt;strong&gt;{2}&lt;/strong&gt;".</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>submitter</code> - the user submitting the request</dd>
<dd><code>workflowApproverKey</code> - the key that names the user, Group or Role who must approve
 the request. The key is looked up in <code>jspwiki.properties</code>, and is derived
 by prepending <code>jspwiki.approver</code> to the value of <code>workflowApproverKey</code></dd>
<dd><code>prepTask</code> - the initial task that should run before the Decision step is processed.
 If this parameter is <code>null</code>, the Decision will run as the first Step instead</dd>
<dd><code>decisionKey</code> - the message key in <code>default.properties</code> that contains
 the text that will appear in approvers' workflow queues indicating they need to make
 a Decision; for example, <code>decision.saveWikiPage</code>. In the i18n message bundle
 file, this key might return text that reads "Approve page &lt;strong&gt;{2}&lt;/strong&gt;"</dd>
<dd><code>facts</code> - an array of <a href="Fact.html" title="class in org.apache.wiki.workflow"><code>Fact</code></a> objects that will be shown to the approver
 to aid decision-making. The facts will be displayed in the order supplied in the array</dd>
<dd><code>completionTask</code> - the Task that will run if the Decision is approved</dd>
<dd><code>rejectedMessageKey</code> - the message key in <code>default.properties</code> that contains
 the text that will appear in the submitter's workflow queue if request was
 not approved; for example, <code>notification.saveWikiPage.reject</code>. In the
 i18n message bundle file, this key might might return
 text that reads "Your request to save page &lt;strong&gt;{2}&lt;/strong&gt; was rejected."
 If this parameter is <code>null</code>, no message will be sent</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the created workflow</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the name of the approving user, Role or Group cannot be determined</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WorkflowBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright © 2001-2021 The Apache Software Foundation. All rights reserved.</small></p>
</footer>
</body>
</html>