<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_191) on Sat Aug 24 11:43:22 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WorkflowBuilder (Apache JSPWiki 2.11.0.M5-SNAPSHOT API)</title>
<meta name="date" content="2019-08-24">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WorkflowBuilder (Apache JSPWiki 2.11.0.M5-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WorkflowBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/wiki/workflow/WorkflowManager.html" title="class in org.apache.wiki.workflow"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/wiki/workflow/WorkflowBuilder.html" target="_top">Frames</a></li>
<li><a href="WorkflowBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.wiki.workflow</div>
<h2 title="Class WorkflowBuilder" class="title">Class WorkflowBuilder</h2>
</div>
<div class="contentContainer">
<map id="APIVIZ" name="APIVIZ">
<area shape="rect" id="node1" href="WorkflowBuilder.html" title="WorkflowBuilder" alt="" coords="5,5,120,31"/>
</map>
<div id="apivizContainer" style="text-align: center;"><img src="WorkflowBuilder.png" usemap="#APIVIZ" border="0"></div>
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.wiki.workflow.WorkflowBuilder</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.31">WorkflowBuilder</a>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">Factory class that creates common Workflow instances such as a standard approval workflow.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/wiki/workflow/WorkflowBuilder.html#buildApprovalWorkflow-java.security.Principal-java.lang.String-org.apache.wiki.workflow.Step-java.lang.String-org.apache.wiki.workflow.Fact:A-org.apache.wiki.workflow.Step-java.lang.String-">buildApprovalWorkflow</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html?is-external=true" title="class or interface in java.security">Principal</a>&nbsp;submitter,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;workflowApproverKey,
                     <a href="../../../../org/apache/wiki/workflow/Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;prepTask,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;decisionKey,
                     <a href="../../../../org/apache/wiki/workflow/Fact.html" title="class in org.apache.wiki.workflow">Fact</a>[]&nbsp;facts,
                     <a href="../../../../org/apache/wiki/workflow/Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;completionTask,
                     <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;rejectedMessageKey)</code>
<div class="block">Builds an approval workflow that requests approval from a named
 user, <a href="../../../../org/apache/wiki/auth/authorize/Group.html" title="class in org.apache.wiki.auth.authorize"><code>Group</code></a> or
 <a href="../../../../org/apache/wiki/auth/authorize/Role.html" title="class in org.apache.wiki.auth.authorize"><code>Role</code></a> before running a Task.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../org/apache/wiki/workflow/WorkflowBuilder.html" title="class in org.apache.wiki.workflow">WorkflowBuilder</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/wiki/workflow/WorkflowBuilder.html#getBuilder-org.apache.wiki.WikiEngine-">getBuilder</a></span>(<a href="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</a>&nbsp;engine)</code>
<div class="block">Returns the WorkflowBuilder instance for a WikiEngine.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBuilder-org.apache.wiki.WikiEngine-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBuilder</h4>
<pre>public static&nbsp;<a href="../../../../org/apache/wiki/workflow/WorkflowBuilder.html" title="class in org.apache.wiki.workflow">WorkflowBuilder</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.51">getBuilder</a>(<a href="../../../../org/apache/wiki/WikiEngine.html" title="class in org.apache.wiki">WikiEngine</a>&nbsp;engine)</pre>
<div class="block">Returns the WorkflowBuilder instance for a WikiEngine. Only one WorkflowBuilder
 exists for a given engine.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>engine</code> - the wiki engine</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the workflow builder</dd>
</dl>
</li>
</ul>
<a name="buildApprovalWorkflow-java.security.Principal-java.lang.String-org.apache.wiki.workflow.Step-java.lang.String-org.apache.wiki.workflow.Fact:A-org.apache.wiki.workflow.Step-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>buildApprovalWorkflow</h4>
<pre>public&nbsp;<a href="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow">Workflow</a>&nbsp;<a href="../../../../src-html/org/apache/wiki/workflow/WorkflowBuilder.html#line.105">buildApprovalWorkflow</a>(<a href="https://docs.oracle.com/javase/8/docs/api/java/security/Principal.html?is-external=true" title="class or interface in java.security">Principal</a>&nbsp;submitter,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;workflowApproverKey,
                                      <a href="../../../../org/apache/wiki/workflow/Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;prepTask,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;decisionKey,
                                      <a href="../../../../org/apache/wiki/workflow/Fact.html" title="class in org.apache.wiki.workflow">Fact</a>[]&nbsp;facts,
                                      <a href="../../../../org/apache/wiki/workflow/Step.html" title="interface in org.apache.wiki.workflow">Step</a>&nbsp;completionTask,
                                      <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;rejectedMessageKey)
                               throws <a href="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></pre>
<div class="block"><p>Builds an approval workflow that requests approval from a named
 user, <a href="../../../../org/apache/wiki/auth/authorize/Group.html" title="class in org.apache.wiki.auth.authorize"><code>Group</code></a> or
 <a href="../../../../org/apache/wiki/auth/authorize/Role.html" title="class in org.apache.wiki.auth.authorize"><code>Role</code></a> before running a Task.</p>
 <p>The Principal who approves the activity is determined by looking up
 the property <code>jspwiki.approver.<var>workflowApproverKey</var></code>
 in <code>jspwiki.properties</code>. If that Principal resolves to a known user, Group
 Role, a Decision will be placed in the respective workflow queue (or multiple queues,
 if necessary). Only one approver needs to make the Decision, and if the request is
 approved, the completion task will be executed. If the request is denied, a
 <a href="../../../../org/apache/wiki/workflow/SimpleNotification.html" title="class in org.apache.wiki.workflow"><code>SimpleNotification</code></a> with a message corresponding to the <code>rejectedMessage</code>
 message key will be placed in the submitter's workflow queue.</p>
 <p>To help approvers determine how to make the Decision, callers can supply an
 array of Fact objects to this method, which will be added to the Decision in the order
 they appear in the array. These items will be displayed in the web UI.
 In addition, the value of the first Fact will also be added as the third message
 argument for the workflow (the first two are always the submitter and the approver).
 For example, the PageManager code that creates the "save page approval" workflow
 adds the name of the page as its first Fact; this results in the page name being
 substituted correctly into the resulting message:
 "Save wiki page &lt;strong&gt;{2}&lt;/strong&gt;".</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>submitter</code> - the user submitting the request</dd>
<dd><code>workflowApproverKey</code> - the key that names the user, Group or Role who must approve
 the request. The key is looked up in <code>jspwiki.properties</code>, and is derived
 by prepending <code>jspwiki.approver</code> to the value of <code>workflowApproverKey</code></dd>
<dd><code>prepTask</code> - the initial task that should run before the Decision step is processed.
 If this parameter is <code>null</code>, the Decision will run as the first Step instead</dd>
<dd><code>decisionKey</code> - the message key in <code>default.properties</code> that contains
 the text that will appear in approvers' workflow queues indicating they need to make
 a Decision; for example, <code>decision.saveWikiPage</code>. In the i18n message bundle
 file, this key might return text that reads "Approve page &lt;strong&gt;{2}&lt;/strong&gt;"</dd>
<dd><code>facts</code> - an array of <a href="../../../../org/apache/wiki/workflow/Fact.html" title="class in org.apache.wiki.workflow"><code>Fact</code></a> objects that will be shown to the approver
 to aid decision-making. The facts will be displayed in the order supplied in the array</dd>
<dd><code>completionTask</code> - the Task that will run if the Decision is approved</dd>
<dd><code>rejectedMessageKey</code> - the message key in <code>default.properties</code> that contains
 the text that will appear in the submitter's workflow queue if request was
 not approved; for example, <code>notification.saveWikiPage.reject</code>. In the
 i18n message bundle file, this key might might return
 text that reads "Your request to save page &lt;strong&gt;{2}&lt;/strong&gt; was rejected."
 If this parameter is <code>null</code>, no message will be sent</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the created workflow</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../org/apache/wiki/api/exceptions/WikiException.html" title="class in org.apache.wiki.api.exceptions">WikiException</a></code> - if the name of the approving user, Role or Group cannot be determined</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WorkflowBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/wiki/workflow/Workflow.html" title="class in org.apache.wiki.workflow"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/wiki/workflow/WorkflowManager.html" title="class in org.apache.wiki.workflow"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/wiki/workflow/WorkflowBuilder.html" target="_top">Frames</a></li>
<li><a href="WorkflowBuilder.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright © 2001-2019 The Apache Software Foundation. All rights reserved.</small></p>
</body>
</html>
